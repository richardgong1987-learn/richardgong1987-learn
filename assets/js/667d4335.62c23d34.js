"use strict";(self.webpackChunkrichardgong_1987_learn=self.webpackChunkrichardgong_1987_learn||[]).push([[6537],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return d}});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),k=p(n),d=l,m=k["".concat(o,".").concat(d)]||k[d]||u[d]||r;return n?a.createElement(m,i(i({ref:t},s),{},{components:n})):a.createElement(m,i({ref:t},s))}));function d(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=k;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:l,i[1]=c;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},92657:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return o},metadata:function(){return p},toc:function(){return s},default:function(){return k}});var a=n(83117),l=n(80102),r=(n(67294),n(3905)),i=["components"],c={},o="NIO\u3010\u7f51\u7edc\u7f16\u7a0b\u548c\u3011",p={unversionedId:"a-java/a-java-concurrent/nio",id:"a-java/a-java-concurrent/nio",title:"NIO\u3010\u7f51\u7edc\u7f16\u7a0b\u548c\u3011",description:"\u6559\u5b66\u76ee\u6807",source:"@site/docs/a-java/a-java-concurrent/nio.md",sourceDirName:"a-java/a-java-concurrent",slug:"/a-java/a-java-concurrent/nio",permalink:"/richardgong1987-learn/docs/a-java/a-java-concurrent/nio",editUrl:"https://github.com/richardgong1987-learn/richardgong1987-learn/edit/master/website/docs/a-java/a-java-concurrent/nio.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Java\u5e76\u53d1\u7f16\u7a0b",permalink:"/richardgong1987-learn/docs/a-java/a-java-concurrent/intro"},next:{title:"ThreadLocal\u5168\u9762\u89e3\u6790",permalink:"/richardgong1987-learn/docs/a-java/a-java-concurrent/threadlocal"}},s=[{value:"\u6559\u5b66\u76ee\u6807",id:"\u6559\u5b66\u76ee\u6807",children:[],level:2},{value:"1.1\u8f6f\u4ef6\u7ed3\u6784",id:"11\u8f6f\u4ef6\u7ed3\u6784",children:[],level:2},{value:"1.2 \u7f51\u7edc\u901a\u4fe1\u534f\u8bae",id:"12-\u7f51\u7edc\u901a\u4fe1\u534f\u8bae",children:[],level:2},{value:"1.3 \u534f\u8bae\u5206\u7c7b",id:"13-\u534f\u8bae\u5206\u7c7b",children:[],level:2},{value:"1.4 \u7f51\u7edc\u7f16\u7a0b\u4e09\u8981\u7d20",id:"14-\u7f51\u7edc\u7f16\u7a0b\u4e09\u8981\u7d20",children:[{value:"\u534f\u8bae",id:"\u534f\u8bae",children:[],level:3},{value:"IP\u5730\u5740",id:"ip\u5730\u5740",children:[],level:3},{value:"\u7aef\u53e3\u53f7",id:"\u7aef\u53e3\u53f7",children:[],level:3}],level:2},{value:"2.1 UDP\u534f\u8bae\u6982\u8ff0",id:"21-udp\u534f\u8bae\u6982\u8ff0",children:[],level:2},{value:"2.2 UDP\u901a\u4fe1\u6848\u4f8b",id:"22-udp\u901a\u4fe1\u6848\u4f8b",children:[{value:"2.2.1 UDP\u53d1\u9001\u7aef\u4ee3\u7801\u5b9e\u73b0",id:"221-udp\u53d1\u9001\u7aef\u4ee3\u7801\u5b9e\u73b0",children:[],level:3},{value:"2.2.2 UDP\u63a5\u6536\u7aef\u4ee3\u7801\u5b9e\u73b0",id:"222-udp\u63a5\u6536\u7aef\u4ee3\u7801\u5b9e\u73b0",children:[],level:3}],level:2},{value:"3.1 TCP\u534f\u8bae\u6982\u8ff0",id:"31-tcp\u534f\u8bae\u6982\u8ff0",children:[],level:2},{value:"3.2 TCP\u901a\u4fe1\u6848\u4f8b",id:"32-tcp\u901a\u4fe1\u6848\u4f8b",children:[{value:"3.2.2 \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e",id:"322-\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e",children:[],level:3},{value:"3.3.3 \u670d\u52a1\u5668\u5411\u5ba2\u6237\u7aef\u56de\u5199\u6570\u636e",id:"333-\u670d\u52a1\u5668\u5411\u5ba2\u6237\u7aef\u56de\u5199\u6570\u636e",children:[],level:3}],level:2},{value:"4.1 \u6587\u4ef6\u4e0a\u4f20\u6848\u4f8b",id:"41-\u6587\u4ef6\u4e0a\u4f20\u6848\u4f8b",children:[{value:"\u6587\u4ef6\u4e0a\u4f20\u5206\u6790\u56fe\u89e3",id:"\u6587\u4ef6\u4e0a\u4f20\u5206\u6790\u56fe\u89e3",children:[],level:3},{value:"\u6848\u4f8b\u5b9e\u73b0",id:"\u6848\u4f8b\u5b9e\u73b0",children:[],level:3}],level:2},{value:"4.2 \u6a21\u62dfBS\u670d\u52a1\u5668",id:"42-\u6a21\u62dfbs\u670d\u52a1\u5668",children:[{value:"\u6848\u4f8b\u5206\u6790",id:"\u6848\u4f8b\u5206\u6790",children:[],level:3},{value:"\u6848\u4f8b\u5b9e\u73b0",id:"\u6848\u4f8b\u5b9e\u73b0-1",children:[],level:3}],level:2},{value:"5.1 NIO\u6982\u8ff0",id:"51-nio\u6982\u8ff0",children:[{value:"5.1.1  NIO\u5f15\u5165",id:"511--nio\u5f15\u5165",children:[],level:3}],level:2},{value:"5.2 NIO(\u540c\u6b65\u3001\u975e\u963b\u585e)",id:"52-nio\u540c\u6b65\u975e\u963b\u585e",children:[{value:"<strong>5.2.1 Channel\uff08\u901a\u9053\uff09</strong>",id:"521-channel\u901a\u9053",children:[],level:3},{value:"5.2.2 Buffer",id:"522-buffer",children:[],level:3},{value:"5.2.3 Selector",id:"523-selector",children:[{value:"1.\u5982\u4f55\u521b\u5efa\u4e00\u4e2aSelector",id:"1\u5982\u4f55\u521b\u5efa\u4e00\u4e2aselector",children:[],level:4},{value:"2.\u6ce8\u518cChannel\u5230Selector",id:"2\u6ce8\u518cchannel\u5230selector",children:[],level:4},{value:"3.\u5173\u4e8eSelectionKey",id:"3\u5173\u4e8eselectionkey",children:[{value:"(1) Interest set",id:"1-interest-set",children:[],level:5},{value:"(2) Ready Set",id:"2-ready-set",children:[],level:5},{value:"(3) Channel \u548c Selector",id:"3-channel-\u548c-selector",children:[],level:5},{value:"(4) Attach\u4e00\u4e2a\u5bf9\u8c61",id:"4-attach\u4e00\u4e2a\u5bf9\u8c61",children:[],level:5}],level:4},{value:"4.\u5173\u4e8eSelectedKeys()",id:"4\u5173\u4e8eselectedkeys",children:[],level:4}],level:3}],level:2},{value:"5.3 NIO2\uff08==AIO\uff09(\u5f02\u6b65\u3001\u975e\u963b\u585e)",id:"53-nio2aio\u5f02\u6b65\u975e\u963b\u585e",children:[],level:2}],u={toc:s};function k(e){var t=e.components,c=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},u,c,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"nio\u7f51\u7edc\u7f16\u7a0b\u548c"},"NIO\u3010\u7f51\u7edc\u7f16\u7a0b\u548c\u3011"),(0,r.kt)("h2",{id:"\u6559\u5b66\u76ee\u6807"},"\u6559\u5b66\u76ee\u6807"),(0,r.kt)("ul",{className:"contains-task-list"},(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("input",{parentName:"p",type:"checkbox",checked:!1,disabled:!0})," ","\u80fd\u591f\u8fa8\u522bUDP\u548cTCP\u534f\u8bae\u7279\u70b9"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"UDP \u65e0\u8fde\u63a5\uff0c\u57fa\u4e8e\u6570\u636e\u5305\uff0c\u53d1\u51fa\u53bb\u5c31\u4e0d\u7ba1\u4e86\uff0c\u6027\u80fd\u597d\uff0c\u53ef\u80fd\u4e22\u5931\u6570\u636e\u3002"),(0,r.kt)("li",{parentName:"ul"},"TCP\u6709\u8fde\u63a5\uff0c\u57fa\u4e8e\u901a\u4fe1\u7ba1\u9053\uff0c\u53ef\u9760\u4f20\u8f93\u3002"))),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("input",{parentName:"p",type:"checkbox",checked:!1,disabled:!0})," ","\u80fd\u591f\u8bf4\u51faTCP\u534f\u8bae\u4e0b\u4e24\u4e2a\u5e38\u7528\u7c7b\u540d\u79f0"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aefSocket"),(0,r.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aefServerSocket"))),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("input",{parentName:"p",type:"checkbox",checked:!1,disabled:!0})," ","\u80fd\u591f\u7f16\u5199TCP\u534f\u8bae\u4e0b\u5b57\u7b26\u4e32\u6570\u636e\u4f20\u8f93\u7a0b\u5e8f"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53c2\u89c1\u4ee3\u7801\uff01"))),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("input",{parentName:"p",type:"checkbox",checked:!1,disabled:!0})," ","\u80fd\u591f\u7406\u89e3TCP\u534f\u8bae\u4e0b\u6587\u4ef6\u4e0a\u4f20\u6848\u4f8b"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53c2\u89c1\u4ee3\u7801\uff01"))),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("input",{parentName:"p",type:"checkbox",checked:!1,disabled:!0})," ","\u80fd\u591f\u7406\u89e3TCP\u534f\u8bae\u4e0bBS\u6848\u4f8b"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u53c2\u89c1\u4ee3\u7801\uff01"))),(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("input",{parentName:"p",type:"checkbox",checked:!1,disabled:!0})," ","\u80fd\u591f\u8bf4\u51faNIO\u7684\u4f18\u70b9\u3002"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"BIO:\u540c\u6b65\u963b\u585e\u5f0f\u901a\u4fe1\uff0c\u7ebf\u7a0b\u8981\u4e0e\u5ba2\u6237\u7aef\u8026\u5408\uff0c\u6ca1\u6709\u6570\u636e\u8fd8\u8981\u6b7b\u7b49\uff01\u5e76\u53d1\u8d8a\u9ad8\uff0c\u6b7b\u7684\u8d8a\u5feb\uff01\uff01")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"NIO:\u540c\u6b65\u975e\u963b\u585e\uff1a\u53ea\u9700\u8981\u5f00\u59cb\u4e00\u4e2a\u7ebf\u7a0b\u63a5\u6536\u65e0\u6570\u4e2a\u5ba2\u6237\u7aef\uff0c\u518d\u5f00\u542f\u4e00\u4e2a\u7ebf\u7a0b\u8d1f\u8d23\u8f6e\u8be2\u6240\u6709\u7684\u5ba2\u6237\u7aef"),(0,r.kt)("p",{parentName:"li"},"\u200b\t\u662f\u5426\u6709\u6570\u636e\uff0c\u6709\u6570\u636e\u624d\u5f00\u542f\u4e00\u4e2a\u7ebf\u7a0b\u5904\u7406\u5b83\u3002\u9002\u5408\u8fde\u63a5\u591a\u4f46\u662f\u6570\u636e\u77ed\u7684\u8fde\u63a5\u3002"),(0,r.kt)("p",{parentName:"li"},"\u200b\t\u6027\u80fd\u8f83\u597d\uff01\uff01"))))),(0,r.kt)("h1",{id:"\u7b2c\u4e00\u7ae0-\u7f51\u7edc\u7f16\u7a0b\u5165\u95e8"},"\u7b2c\u4e00\u7ae0 \u7f51\u7edc\u7f16\u7a0b\u5165\u95e8"),(0,r.kt)("h2",{id:"11\u8f6f\u4ef6\u7ed3\u6784"},"1.1\u8f6f\u4ef6\u7ed3\u6784"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"C/S\u7ed3\u6784")," \uff1a\u5168\u79f0\u4e3aClient/Server\u7ed3\u6784\uff0c\u662f\u6307\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7ed3\u6784\u3002\u5e38\u89c1\u7a0b\u5e8f\u6709\uff31\uff31\u3001\u8fc5\u96f7\u7b49\u8f6f\u4ef6\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566446300784",src:n(24443).Z})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"B/S\u7ed3\u6784")," \uff1a\u5168\u79f0\u4e3aBrowser/Server\u7ed3\u6784\uff0c\u662f\u6307\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u7ed3\u6784\u3002\u5e38\u89c1\u6d4f\u89c8\u5668\u6709\u8c37\u6b4c\u3001\u706b\u72d0\u7b49\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566446315067",src:n(70732).Z})),(0,r.kt)("p",null,"\u4e24\u79cd\u67b6\u6784\u5404\u6709\u4f18\u52bf\uff0c\u4f46\u662f\u65e0\u8bba\u54ea\u79cd\u67b6\u6784\uff0c\u90fd\u79bb\u4e0d\u5f00\u7f51\u7edc\u7684\u652f\u6301\u3002",(0,r.kt)("strong",{parentName:"p"},"\u7f51\u7edc\u7f16\u7a0b"),"\uff0c\u5c31\u662f\u5728\u4e00\u5b9a\u7684\u534f\u8bae\u4e0b\uff0c\u5b9e\u73b0\u4e24\u53f0\u8ba1\u7b97\u673a\u7684\u901a\u4fe1\u7684\u7a0b\u5e8f\u3002"),(0,r.kt)("h2",{id:"12-\u7f51\u7edc\u901a\u4fe1\u534f\u8bae"},"1.2 \u7f51\u7edc\u901a\u4fe1\u534f\u8bae"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"\u7f51\u7edc\u901a\u4fe1\u534f\u8bae\uff1a"),"\u901a\u4fe1\u534f\u8bae\u662f\u5bf9\u8ba1\u7b97\u673a\u5fc5\u987b\u9075\u5b88\u7684\u89c4\u5219\uff0c\u53ea\u6709\u9075\u5b88\u8fd9\u4e9b\u89c4\u5219\uff0c\u8ba1\u7b97\u673a\u4e4b\u95f4\u624d\u80fd\u8fdb\u884c\u901a\u4fe1\u3002\u8fd9\u5c31\u597d\u6bd4\u5728\u9053\u8def\u4e2d\u884c\u9a76\u7684\u6c7d\u8f66\u4e00\u5b9a\u8981\u9075\u5b88\u4ea4\u901a\u89c4\u5219\u4e00\u6837\uff0c\u534f\u8bae\u4e2d\u5bf9\u6570\u636e\u7684\u4f20\u8f93\u683c\u5f0f\u3001\u4f20\u8f93\u901f\u7387\u3001\u4f20\u8f93\u6b65\u9aa4\u7b49\u505a\u4e86\u7edf\u4e00\u89c4\u5b9a\uff0c\u901a\u4fe1\u53cc\u65b9\u5fc5\u987b\u540c\u65f6\u9075\u5b88\uff0c\u6700\u7ec8\u5b8c\u6210\u6570\u636e\u4ea4\u6362\u3002 ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"TCP/IP\u534f\u8bae\uff1a")," \u4f20\u8f93\u63a7\u5236\u534f\u8bae/\u56e0\u7279\u7f51\u4e92\u8054\u534f\u8bae( Transmission Control Protocol/Internet Protocol)\uff0c\u662fInternet\u6700\u57fa\u672c\u3001\u6700\u5e7f\u6cdb\u7684\u534f\u8bae\u3002\u5b83\u5b9a\u4e49\u4e86\u8ba1\u7b97\u673a\u5982\u4f55\u8fde\u5165\u56e0\u7279\u7f51\uff0c\u4ee5\u53ca\u6570\u636e\u5982\u4f55\u5728\u5b83\u4eec\u4e4b\u95f4\u4f20\u8f93\u7684\u6807\u51c6\u3002\u5b83\u7684\u5185\u90e8\u5305\u542b\u4e00\u7cfb\u5217\u7684\u7528\u4e8e\u5904\u7406\u6570\u636e\u901a\u4fe1\u7684\u534f\u8bae\uff0c\u5e76\u91c7\u7528\u4e864\u5c42\u7684\u5206\u5c42\u6a21\u578b\uff0c\u6bcf\u4e00\u5c42\u90fd\u547c\u53eb\u5b83\u7684\u4e0b\u4e00\u5c42\u6240\u63d0\u4f9b\u7684\u534f\u8bae\u6765\u5b8c\u6210\u81ea\u5df1\u7684\u9700\u6c42\u3002"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566446331855",src:n(45011).Z})),(0,r.kt)("h2",{id:"13-\u534f\u8bae\u5206\u7c7b"},"1.3 \u534f\u8bae\u5206\u7c7b"),(0,r.kt)("p",null,"\u901a\u4fe1\u7684\u534f\u8bae\u8fd8\u662f\u6bd4\u8f83\u590d\u6742\u7684\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"java.net")," \u5305\u4e2d\u5305\u542b\u7684\u7c7b\u548c\u63a5\u53e3\uff0c\u5b83\u4eec\u63d0\u4f9b\u4f4e\u5c42\u6b21\u7684\u901a\u4fe1\u7ec6\u8282\u3002\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e9b\u7c7b\u548c\u63a5\u53e3\uff0c\u6765\u4e13\u6ce8\u4e8e\u7f51\u7edc\u7a0b\u5e8f\u5f00\u53d1\uff0c\u800c\u4e0d\u7528\u8003\u8651\u901a\u4fe1\u7684\u7ec6\u8282\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"java.net")," \u5305\u4e2d\u63d0\u4f9b\u4e86\u4e24\u79cd\u5e38\u89c1\u7684\u7f51\u7edc\u534f\u8bae\u7684\u652f\u6301\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"TCP"),"\uff1a\u4f20\u8f93\u63a7\u5236\u534f\u8bae (Transmission Control Protocol)\u3002TCP\u534f\u8bae\u662f",(0,r.kt)("strong",{parentName:"li"},"\u9762\u5411\u8fde\u63a5"),"\u7684\u901a\u4fe1\u534f\u8bae\uff0c\u5373\u4f20\u8f93\u6570\u636e\u4e4b\u524d\uff0c\u5728\u53d1\u9001\u7aef\u548c\u63a5\u6536\u7aef\u5efa\u7acb\u903b\u8f91\u8fde\u63a5\uff0c\u7136\u540e\u518d\u4f20\u8f93\u6570\u636e\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e24\u53f0\u8ba1\u7b97\u673a\u4e4b\u95f4\u53ef\u9760\u65e0\u5dee\u9519\u7684\u6570\u636e\u4f20\u8f93\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4e09\u6b21\u63e1\u624b\uff1aTCP\u534f\u8bae\u4e2d\uff0c\u5728\u53d1\u9001\u6570\u636e\u7684\u51c6\u5907\u9636\u6bb5\uff0c\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u4e09\u6b21\u4ea4\u4e92\uff0c\u4ee5\u4fdd\u8bc1\u8fde\u63a5\u7684\u53ef\u9760\u3002",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u6b21\u63e1\u624b\uff0c\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u53d1\u51fa\u8fde\u63a5\u8bf7\u6c42\uff0c\u7b49\u5f85\u670d\u52a1\u5668\u786e\u8ba4\u3002\u670d\u52a1\u5668\u4f60\u6b7b\u4e86\u5417\uff1f"),(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u6b21\u63e1\u624b\uff0c\u670d\u52a1\u5668\u7aef\u5411\u5ba2\u6237\u7aef\u56de\u9001\u4e00\u4e2a\u54cd\u5e94\uff0c\u901a\u77e5\u5ba2\u6237\u7aef\u6536\u5230\u4e86\u8fde\u63a5\u8bf7\u6c42\u3002\u6211\u6d3b\u7740\u554a\uff01\uff01"),(0,r.kt)("li",{parentName:"ul"},"\u7b2c\u4e09\u6b21\u63e1\u624b\uff0c\u5ba2\u6237\u7aef\u518d\u6b21\u5411\u670d\u52a1\u5668\u7aef\u53d1\u9001\u786e\u8ba4\u4fe1\u606f\uff0c\u786e\u8ba4\u8fde\u63a5\u3002\u6574\u4e2a\u4ea4\u4e92\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\u3002\u6211\u77e5\u9053\u4e86\uff01\uff01")))))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566446712862",src:n(67605).Z})),(0,r.kt)("p",null,"\u200b    \u5b8c\u6210\u4e09\u6b21\u63e1\u624b\uff0c\u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u5f00\u59cb\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u4e86\u3002\u7531\u4e8e\u8fd9\u79cd\u9762\u5411\u8fde\u63a5\u7684\u7279\u6027\uff0cTCP\u534f\u8bae\u53ef\u4ee5\u4fdd\u8bc1\u4f20\u8f93\u6570\u636e\u7684\u5b89\u5168\uff0c\u6240\u4ee5\u5e94\u7528\u5341\u5206\u5e7f\u6cdb\uff0c\u4f8b\u5982\u4e0b\u8f7d\u6587\u4ef6\u3001\u6d4f\u89c8\u7f51\u9875\u7b49\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"UDP"),"\uff1a\u7528\u6237\u6570\u636e\u62a5\u534f\u8bae(User Datagram Protocol)\u3002UDP\u534f\u8bae\u662f\u4e00\u4e2a",(0,r.kt)("strong",{parentName:"li"},"\u9762\u5411\u65e0\u8fde\u63a5"),"\u7684\u534f\u8bae\u3002\u4f20\u8f93\u6570\u636e\u65f6\uff0c\u4e0d\u9700\u8981\u5efa\u7acb\u8fde\u63a5\uff0c\u4e0d\u7ba1\u5bf9\u65b9\u7aef\u670d\u52a1\u662f\u5426\u542f\u52a8\uff0c\u76f4\u63a5\u5c06\u6570\u636e\u3001\u6570\u636e\u6e90\u548c\u76ee\u7684\u5730\u90fd\u5c01\u88c5\u5728\u6570\u636e\u5305\u4e2d\uff0c\u76f4\u63a5\u53d1\u9001\u3002\u6bcf\u4e2a\u6570\u636e\u5305\u7684\u5927\u5c0f\u9650\u5236\u572864k\u4ee5\u5185\u3002\u5b83\u662f\u4e0d\u53ef\u9760\u534f\u8bae\uff0c\u56e0\u4e3a\u65e0\u8fde\u63a5\uff0c\u6240\u4ee5\u4f20\u8f93\u901f\u5ea6\u5feb\uff0c\u4f46\u662f\u5bb9\u6613\u4e22\u5931\u6570\u636e\u3002\u65e5\u5e38\u5e94\u7528\u4e2d,\u4f8b\u5982\u89c6\u9891\u4f1a\u8bae\u3001QQ\u804a\u5929\u7b49\u3002")),(0,r.kt)("h2",{id:"14-\u7f51\u7edc\u7f16\u7a0b\u4e09\u8981\u7d20"},"1.4 \u7f51\u7edc\u7f16\u7a0b\u4e09\u8981\u7d20"),(0,r.kt)("h3",{id:"\u534f\u8bae"},"\u534f\u8bae"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u534f\u8bae\uff1a"),"\u8ba1\u7b97\u673a\u7f51\u7edc\u901a\u4fe1\u5fc5\u987b\u9075\u5b88\u7684\u89c4\u5219\uff0c\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002")),(0,r.kt)("h3",{id:"ip\u5730\u5740"},"IP\u5730\u5740"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"IP\u5730\u5740\uff1a\u6307\u4e92\u8054\u7f51\u534f\u8bae\u5730\u5740\uff08Internet Protocol Address\uff09"),"\uff0c\u4fd7\u79f0IP\u3002IP\u5730\u5740\u7528\u6765\u7ed9\u4e00\u4e2a\u7f51\u7edc\u4e2d\u7684\u8ba1\u7b97\u673a\u8bbe\u5907\u505a\u552f\u4e00\u7684\u7f16\u53f7\u3002\u5047\u5982\u6211\u4eec\u628a\u201c\u4e2a\u4eba\u7535\u8111\u201d\u6bd4\u4f5c\u201c\u4e00\u53f0\u7535\u8bdd\u201d\u7684\u8bdd\uff0c\u90a3\u4e48\u201cIP\u5730\u5740\u201d\u5c31\u76f8\u5f53\u4e8e\u201c\u7535\u8bdd\u53f7\u7801\u201d\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"IP\u5730\u5740\u5206\u7c7b "),"   ","[][]","[][]"," o o o o"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"IPv4\uff1a\u662f\u4e00\u4e2a32\u4f4d\u7684\u4e8c\u8fdb\u5236\u6570\uff0c\u901a\u5e38\u88ab\u5206\u4e3a4\u4e2a\u5b57\u8282\uff0c\u8868\u793a\u6210",(0,r.kt)("inlineCode",{parentName:"p"},"a.b.c.d")," \u7684\u5f62\u5f0f\uff0c\u4f8b\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.65.100")," \u3002\u5176\u4e2da\u3001b\u3001c\u3001d\u90fd\u662f0~255\u4e4b\u95f4\u7684\u5341\u8fdb\u5236\u6574\u6570\uff0c\u90a3\u4e48\u6700\u591a\u53ef\u4ee5\u8868\u793a42\u4ebf\u4e2a\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"IPv6\uff1a\u7531\u4e8e\u4e92\u8054\u7f51\u7684\u84ec\u52c3\u53d1\u5c55\uff0cIP\u5730\u5740\u7684\u9700\u6c42\u91cf\u6108\u6765\u6108\u5927\uff0c\u4f46\u662f\u7f51\u7edc\u5730\u5740\u8d44\u6e90\u6709\u9650\uff0c\u4f7f\u5f97IP\u7684\u5206\u914d\u8d8a\u53d1\u7d27\u5f20\u3002\u6709\u8d44\u6599\u663e\u793a\uff0c\u5168\u7403IPv4\u5730\u5740\u57282011\u5e742\u6708\u5206\u914d\u5b8c\u6bd5\u3002"),(0,r.kt)("p",{parentName:"li"},"\u4e3a\u4e86\u6269\u5927\u5730\u5740\u7a7a\u95f4\uff0c\u62df\u901a\u8fc7IPv6\u91cd\u65b0\u5b9a\u4e49\u5730\u5740\u7a7a\u95f4\uff0c\u91c7\u7528128\u4f4d\u5730\u5740\u957f\u5ea6\uff0c\u6bcf16\u4e2a\u5b57\u8282\u4e00\u7ec4\uff0c\u5206\u62108\u7ec4\u5341\u516d\u8fdb\u5236\u6570\uff0c\u8868\u793a\u6210",(0,r.kt)("inlineCode",{parentName:"p"},"ABCD:EF01:2345:6789:ABCD:EF01:2345:6789"),"\uff0c\u53f7\u79f0\u53ef\u4ee5\u4e3a\u5168\u4e16\u754c\u7684\u6bcf\u4e00\u7c92\u6c99\u5b50\u7f16\u4e0a\u4e00\u4e2a\u7f51\u5740\uff0c\u8fd9\u6837\u5c31\u89e3\u51b3\u4e86\u7f51\u7edc\u5730\u5740\u8d44\u6e90\u6570\u91cf\u4e0d\u591f\u7684\u95ee\u9898\u3002"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5e38\u7528\u547d\u4ee4")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u67e5\u770b\u672c\u673aIP\u5730\u5740\uff0c\u5728\u63a7\u5236\u53f0\u8f93\u5165\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"ipconfig\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u68c0\u67e5\u7f51\u7edc\u662f\u5426\u8fde\u901a\uff0c\u5728\u63a7\u5236\u53f0\u8f93\u5165\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"ping \u7a7a\u683c IP\u5730\u5740\nping 220.181.57.216\nping www.baidu.com\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u7279\u6b8a\u7684IP\u5730\u5740")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u672c\u673aIP\u5730\u5740\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"127.0.0.1"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"localhost")," \u3002")),(0,r.kt)("h3",{id:"\u7aef\u53e3\u53f7"},"\u7aef\u53e3\u53f7"),(0,r.kt)("p",null,"\u7f51\u7edc\u7684\u901a\u4fe1\uff0c\u672c\u8d28\u4e0a\u662f\u4e24\u4e2a\u8fdb\u7a0b\uff08\u5e94\u7528\u7a0b\u5e8f\uff09\u7684\u901a\u4fe1\u3002\u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u6709\u5f88\u591a\u7684\u8fdb\u7a0b\uff0c\u90a3\u4e48\u5728\u7f51\u7edc\u901a\u4fe1\u65f6\uff0c\u5982\u4f55\u533a\u5206\u8fd9\u4e9b\u8fdb\u7a0b\u5462\uff1f"),(0,r.kt)("p",null,"\u5982\u679c\u8bf4",(0,r.kt)("strong",{parentName:"p"},"IP\u5730\u5740"),"\u53ef\u4ee5\u552f\u4e00\u6807\u8bc6\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\uff0c\u90a3\u4e48",(0,r.kt)("strong",{parentName:"p"},"\u7aef\u53e3\u53f7"),"\u5c31\u53ef\u4ee5\u552f\u4e00\u6807\u8bc6\u8bbe\u5907\u4e2d\u7684\u8fdb\u7a0b\uff08\u5e94\u7528\u7a0b\u5e8f\uff09\u4e86\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u7aef\u53e3\u53f7\uff1a\u7528\u4e24\u4e2a\u5b57\u8282\u8868\u793a\u7684\u6574\u6570\uff0c\u5b83\u7684\u53d6\u503c\u8303\u56f4\u662f0~65535"),"\u3002\u5176\u4e2d\uff0c0~1023\u4e4b\u95f4\u7684\u7aef\u53e3\u53f7\u7528\u4e8e\u4e00\u4e9b\u77e5\u540d\u7684\u7f51\u7edc\u670d\u52a1\u548c\u5e94\u7528\uff0c\u666e\u901a\u7684\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u4f7f\u75281024\u4ee5\u4e0a\u7684\u7aef\u53e3\u53f7\u3002\u5982\u679c\u7aef\u53e3\u53f7\u88ab\u53e6\u5916\u4e00\u4e2a\u670d\u52a1\u6216\u5e94\u7528\u6240\u5360\u7528\uff0c\u4f1a\u5bfc\u81f4\u5f53\u524d\u7a0b\u5e8f\u542f\u52a8\u5931\u8d25\u3002")),(0,r.kt)("p",null,"\u5229\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"\u534f\u8bae"),"+",(0,r.kt)("inlineCode",{parentName:"p"},"IP\u5730\u5740"),"+",(0,r.kt)("inlineCode",{parentName:"p"},"\u7aef\u53e3\u53f7")," \u4e09\u5143\u7ec4\u5408\uff0c\u5c31\u53ef\u4ee5\u6807\u8bc6\u7f51\u7edc\u4e2d\u7684\u8fdb\u7a0b\u4e86\uff0c\u90a3\u4e48\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1\u5c31\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u6807\u8bc6\u4e0e\u5176\u5b83\u8fdb\u7a0b\u8fdb\u884c\u4ea4\u4e92\u3002ddress"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'/**\n    InetAddress\u7c7b\u6982\u8ff0\n        * \u4e00\u4e2a\u8be5\u7c7b\u7684\u5bf9\u8c61\u5c31\u4ee3\u8868\u4e00\u4e2aIP\u5730\u5740\u5bf9\u8c61\u3002\n\n    InetAddress\u7c7b\u6210\u5458\u65b9\u6cd5\n        * static InetAddress getLocalHost()\n            * \u83b7\u5f97\u672c\u5730\u4e3b\u673aIP\u5730\u5740\u5bf9\u8c61\n        * static InetAddress getByName(String host)\n            * \u6839\u636eIP\u5730\u5740\u5b57\u7b26\u4e32\u6216\u4e3b\u673a\u540d\u83b7\u5f97\u5bf9\u5e94\u7684IP\u5730\u5740\u5bf9\u8c61\n\n        * String getHostName();\u83b7\u5f97\u4e3b\u673a\u540d\n        * String getHostAddress();\u83b7\u5f97IP\u5730\u5740\u5b57\u7b26\u4e32\n */\npublic class InetAddressDemo01 {\n    public static void main(String[] args) throws Exception {\n        // \u83b7\u5f97\u672c\u5730\u4e3b\u673aIP\u5730\u5740\u5bf9\u8c61\n        InetAddress inet01 = InetAddress.getLocalHost();\n        // pkxingdeMacBook-Pro.local/10.211.55.2\n        // \u4e3b\u673a\u540d/ip\u5730\u5740\u5b57\u7b26\u4e32\n        System.out.println(inet01);\n        // \u6839\u636eIP\u5730\u5740\u5b57\u7b26\u4e32\u6216\u4e3b\u673a\u540d\u83b7\u5f97\u5bf9\u5e94\u7684IP\u5730\u5740\u5bf9\u8c61\n        // InetAddress inet02 = InetAddress.getByName("192.168.73.97");\n        InetAddress inet02 = InetAddress.getByName("baidu.com");\n        System.out.println(inet02);\n\n        // \u83b7\u5f97\u4e3b\u673a\u540d\n        String hostName = inet01.getHostName();\n        System.out.println(hostName);\n        // \u83b7\u5f97IP\u5730\u5740\u5b57\u7b26\u4e32\n        String hostAddress = inet01.getHostAddress();\n        System.out.println(hostName);\n        System.out.println(hostAddress);\n    }\n}\n')),(0,r.kt)("h1",{id:"\u7b2c\u4e8c\u7ae0-udp\u901a\u4fe1\u7a0b\u5e8f"},"\u7b2c\u4e8c\u7ae0 UDP\u901a\u4fe1\u7a0b\u5e8f"),(0,r.kt)("h2",{id:"21-udp\u534f\u8bae\u6982\u8ff0"},"2.1 UDP\u534f\u8bae\u6982\u8ff0"),(0,r.kt)("p",null,"\u200b       UDP\u662f\u65e0\u8fde\u63a5\u901a\u4fe1\u534f\u8bae\uff0c\u5373\u5728\u6570\u636e\u4f20\u8f93\u65f6\uff0c\u6570\u636e\u7684\u53d1\u9001\u7aef\u548c\u63a5\u6536\u7aef\u4e0d\u5efa\u7acb\u903b\u8f91\u8fde\u63a5\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u5f53\u4e00\u53f0\u8ba1\u7b97\u673a\u5411\u53e6\u5916\u4e00\u53f0\u8ba1\u7b97\u673a\u53d1\u9001\u6570\u636e\u65f6\uff0c\u53d1\u9001\u7aef\u4e0d\u4f1a\u786e\u8ba4\u63a5\u6536\u7aef\u662f\u5426\u5b58\u5728\uff0c\u5c31\u4f1a\u53d1\u51fa\u6570\u636e\uff0c\u540c\u6837\u63a5\u6536\u7aef\u5728\u6536\u5230\u6570\u636e\u65f6\uff0c\u4e5f\u4e0d\u4f1a\u5411\u53d1\u9001\u7aef\u53cd\u9988\u662f\u5426\u6536\u5230\u6570\u636e\u3002"),(0,r.kt)("p",null,"\u200b\t\t\u7531\u4e8e\u4f7f\u7528UDP\u534f\u8bae\u6d88\u8017\u8d44\u6e90\u5c0f\uff0c\u901a\u4fe1\u6548\u7387\u9ad8\uff0c\u6240\u4ee5\u901a\u5e38\u90fd\u4f1a\u7528\u4e8e\u97f3\u9891\u3001\u89c6\u9891\u548c\u666e\u901a\u6570\u636e\u7684\u4f20\u8f93\u4f8b\u5982\u89c6\u9891\u4f1a\u8bae\u90fd\u4f7f\u7528UDP\u534f\u8bae\uff0c\u56e0\u4e3a\u8fd9\u79cd\u60c5\u51b5\u5373\u4f7f\u5076\u5c14\u4e22\u5931\u4e00\u4e24\u4e2a\u6570\u636e\u5305\uff0c\u4e5f\u4e0d\u4f1a\u5bf9\u63a5\u6536\u7ed3\u679c\u4ea7\u751f\u592a\u5927\u5f71\u54cd\u3002"),(0,r.kt)("p",null,"\u200b\t\t\u4f46\u662f\u5728\u4f7f\u7528UDP\u534f\u8bae\u4f20\u9001\u6570\u636e\u65f6\uff0c\u7531\u4e8eUDP\u7684\u9762\u5411\u65e0\u8fde\u63a5\u6027\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u6570\u636e\u7684\u5b8c\u6574\u6027\uff0c\u56e0\u6b64\u5728\u4f20\u8f93\u91cd\u8981\u6570\u636e\u65f6\u4e0d\u5efa\u8bae\u4f7f\u7528UDP\u534f\u8bae\u3002UDP\u901a\u4fe1\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566447182200",src:n(70663).Z})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"UDP\u534f\u8bae\u7684\u7279\u70b9\n    * \u9762\u5411\u65e0\u8fde\u63a5\u7684\u534f\u8bae\n    * \u53d1\u9001\u7aef\u53ea\u7ba1\u53d1\u9001\uff0c\u4e0d\u786e\u8ba4\u5bf9\u65b9\u662f\u5426\u80fd\u6536\u5230\u3002\n    * \u57fa\u4e8e\u6570\u636e\u5305\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3002\n    * \u53d1\u9001\u6570\u636e\u7684\u5927\u5c0f\u9650\u523664K\u4ee5\u5185\n    * \u56e0\u4e3a\u9762\u5411\u65e0\u8fde\u63a5\uff0c\u901f\u5ea6\u5feb\uff0c\u4f46\u662f\u4e0d\u53ef\u9760\u3002\n\nUDP\u534f\u8bae\u7684\u4f7f\u7528\u573a\u666f\n    * \u5373\u65f6\u901a\u8baf\n    * \u5728\u7ebf\u89c6\u9891\n    * \u7f51\u7edc\u8bed\u97f3\u7535\u8bdd\n\nUDP\u534f\u8bae\u76f8\u5173\u7684\u4e24\u4e2a\u7c7b\n    * DatagramPacket\n        * \u6570\u636e\u5305\u5bf9\u8c61\n        * \u4f5c\u7528\uff1a\u7528\u6765\u5c01\u88c5\u8981\u53d1\u9001\u6216\u8981\u63a5\u6536\u7684\u6570\u636e\uff0c\u6bd4\u5982\uff1a\u96c6\u88c5\u7bb1\n    * DategramSocket\n        * \u53d1\u9001\u5bf9\u8c61\n        * \u4f5c\u7528\uff1a\u7528\u6765\u53d1\u9001\u6216\u63a5\u6536\u6570\u636e\u5305\uff0c\u6bd4\u5982\uff1a\u7801\u5934\n\nDatagramPacket\u7c7b\u6784\u9020\u65b9\u6cd5\n    * DatagramPacket(byte[] buf, int length, InetAddress address, int port)\n        * \u521b\u5efa\u53d1\u9001\u7aef\u6570\u636e\u5305\u5bf9\u8c61\n        * buf\uff1a\u8981\u53d1\u9001\u7684\u5185\u5bb9\uff0c\u5b57\u8282\u6570\u7ec4\n        * length\uff1a\u8981\u53d1\u9001\u5185\u5bb9\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\u662f\u5b57\u8282\n        * address\uff1a\u63a5\u6536\u7aef\u7684IP\u5730\u5740\u5bf9\u8c61\n        * port\uff1a\u63a5\u6536\u7aef\u7684\u7aef\u53e3\u53f7\n    * DatagramPacket(byte[] buf, int length)\n        * \u521b\u5efa\u63a5\u6536\u7aef\u7684\u6570\u636e\u5305\u5bf9\u8c61\n        * buf\uff1a\u7528\u6765\u5b58\u50a8\u63a5\u6536\u5230\u5185\u5bb9\n        * length\uff1a\u80fd\u591f\u63a5\u6536\u5185\u5bb9\u7684\u957f\u5ea6\n\nDatagramPacket\u7c7b\u5e38\u7528\u65b9\u6cd5\n    * int getLength() \u83b7\u5f97\u5b9e\u9645\u63a5\u6536\u5230\u7684\u5b57\u8282\u4e2a\u6570\n\nDatagramSocket\u7c7b\u6784\u9020\u65b9\u6cd5\n    * DatagramSocket() \u521b\u5efa\u53d1\u9001\u7aef\u7684Socket\u5bf9\u8c61\uff0c\u7cfb\u7edf\u4f1a\u968f\u673a\u5206\u914d\u4e00\u4e2a\u7aef\u53e3\u53f7\u3002\n    * DatagramSocket(int port) \u521b\u5efa\u63a5\u6536\u7aef\u7684Socket\u5bf9\u8c61\u5e76\u6307\u5b9a\u7aef\u53e3\u53f7\n\nDatagramSocket\u7c7b\u6210\u5458\u65b9\u6cd5\n    * void send(DatagramPacket dp) \u53d1\u9001\u6570\u636e\u5305\n    * void receive(DatagramPacket p) \u63a5\u6536\u6570\u636e\u5305\n")),(0,r.kt)("h2",{id:"22-udp\u901a\u4fe1\u6848\u4f8b"},"2.2 UDP\u901a\u4fe1\u6848\u4f8b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u9700\u6c42\uff1a\u6559\u5e08\u7684\u7535\u8111\u7684\u4e00\u4e2a\u7a0b\u5e8f\u53d1\u9001\u6570\u636e\uff0c\u4e00\u4e2a\u7a0b\u5e8f\u63a5\u6536\u6570\u636e\uff0c\u4f7f\u7528\u7684\u6559\u5e08\u672c\u673a\u7684ip\u3002")),(0,r.kt)("h3",{id:"221-udp\u53d1\u9001\u7aef\u4ee3\u7801\u5b9e\u73b0"},"2.2.1 UDP\u53d1\u9001\u7aef\u4ee3\u7801\u5b9e\u73b0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// UDP\u53d1\u9001\u7aef\u4ee3\u7801\u5b9e\u73b0\npublic class UDPSender {\n    public static void main(String[] args)throws Exception{\n        // \u5b9a\u4e49\u4e00\u4e2a\u5b57\u7b26\u4e32\uff1a\u8981\u53d1\u9001\u7684\u5185\u5bb9\n        String message = "\u7ea6\u5417";\n        // \u5b57\u7b26\u4e32\u8f6c\u5b57\u8282\u6570\u7ec4\n        byte[] buf = message.getBytes();\n        // \u521b\u5efa\u6570\u636e\u5305\u5bf9\u8c61\n        DatagramPacket dp = new DatagramPacket(buf,buf.length,\n                InetAddress.getLocalHost(),6666);\n        // \u521b\u5efa\u53d1\u9001\u7aef\u7684\u53d1\u9001\u5bf9\u8c61\n        DatagramSocket ds = new DatagramSocket(8888);\n        // \u53d1\u9001\u6570\u636e\u5305\n        ds.send(dp);\n        // \u5173\u95ed\u53d1\u9001\u5bf9\u8c61\u91ca\u653e\u7aef\u53e3\u53f7\n        ds.close();\n    }\n}\n')),(0,r.kt)("h3",{id:"222-udp\u63a5\u6536\u7aef\u4ee3\u7801\u5b9e\u73b0"},"2.2.2 UDP\u63a5\u6536\u7aef\u4ee3\u7801\u5b9e\u73b0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'/**\n    UDP\u534f\u8bae\u63a5\u6536\u7aef\u4ee3\u7801\u5b9e\u73b0\n */\npublic class UDPReceive {\n    public static void main(String[] args)throws Exception{\n        // \u521b\u5efa\u63a5\u6536\u5bf9\u8c61DatagramSocket\n        DatagramSocket ds = new DatagramSocket(6666);\n        // \u521b\u5efa\u5b57\u8282\u6570\u7ec4\u7528\u6765\u5b58\u50a8\u63a5\u6536\u63a5\u6536\u5230\u7684\u5185\u5bb9\n        byte[] buf = new byte[1024];\n        // \u521b\u5efa\u6570\u636e\u5305\u5bf9\u8c61\n        DatagramPacket dp = new DatagramPacket(buf,buf.length);\n        // \u63a5\u6536\u6570\u636e\u5305\n        ds.receive(dp);\n\n        // \u83b7\u5f97\u5b9e\u9645\u63a5\u6536\u5230\u7684\u5b57\u8282\u4e2a\u6570\n        int len = dp.getLength();\n        System.out.println("len = " + len);\n        // \u5c06\u5b57\u8282\u6570\u7ec4\u7684\u5185\u5bb9\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u8f93\u51fa\n        System.out.println(new String(buf,0,len));\n\n        // \u83b7\u5f97\u53d1\u9001\u7aef\u7684ip\u5730\u5740\n        String sendIp = dp.getAddress().getHostAddress();\n        // \u83b7\u5f97\u53d1\u9001\u7aef\u7684\u7aef\u53e3\u53f7\n        int port  = dp.getPort();\n        System.out.println(sendIp);\n        System.out.println(port);\n\n        // \u5173\u95edSocket\u5bf9\u8c61\n        ds.close();\n    }\n}\n')),(0,r.kt)("h1",{id:"\u7b2c\u4e09\u7ae0-tcp\u901a\u4fe1\u7a0b\u5e8f"},"\u7b2c\u4e09\u7ae0 TCP\u901a\u4fe1\u7a0b\u5e8f"),(0,r.kt)("h2",{id:"31-tcp\u534f\u8bae\u6982\u8ff0"},"3.1 TCP\u534f\u8bae\u6982\u8ff0"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"TCP\u534f\u8bae\u662f\u9762\u5411\u8fde\u63a5\u7684\u901a\u4fe1\u534f\u8bae\uff0c\u5373\u5728\u4f20\u8f93\u6570\u636e\u524d\u5148\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u5efa\u7acb\u903b\u8f91\u8fde\u63a5\uff0c\u7136\u540e\u518d\u4f20\u8f93\u6570\u636e\u3002\u5b83\u63d0\u4f9b\u4e86\u4e24\u53f0\u8ba1\u7b97\u673a\u4e4b\u95f4\u53ef\u9760\u65e0\u5dee\u9519\u7684\u6570\u636e\u4f20\u8f93\u3002TCP\u901a\u4fe1\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566446503937",src:n(29737).Z})),(0,r.kt)("p",null,"\u7b2c\u4e00\u6b21\u63e1\u624b\uff1a\n\u5ba2\u6237\u7aef\u5c06TCP\u62a5\u6587\u6807\u5fd7\u4f4dSYN\u7f6e\u4e3a1\uff0c\u968f\u673a\u4ea7\u751f\u4e00\u4e2a\u5e8f\u53f7\u503cseq=J\uff0c\u4fdd\u5b58\u5728TCP\u9996\u90e8\u7684\u5e8f\u5217\u53f7(Sequence Number)\u5b57\u6bb5\u91cc\uff0c\u6307\u660e\u5ba2\u6237\u7aef\u6253\u7b97\u8fde\u63a5\u7684\u670d\u52a1\u5668\u7684\u7aef\u53e3\uff0c\u5e76\u5c06\u8be5\u6570\u636e\u5305\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\uff0c\u53d1\u9001\u5b8c\u6bd5\u540e\uff0c\u5ba2\u6237\u7aef\u8fdb\u5165SYN_SENT\u72b6\u6001\uff0c\u7b49\u5f85\u670d\u52a1\u5668\u7aef\u786e\u8ba4\u3002"),(0,r.kt)("p",null,"\u7b2c\u4e8c\u6b21\u63e1\u624b\uff1a\n\u670d\u52a1\u5668\u7aef\u6536\u5230\u6570\u636e\u5305\u540e\u7531\u6807\u5fd7\u4f4dSYN=1\u77e5\u9053\u5ba2\u6237\u7aef\u8bf7\u6c42\u5efa\u7acb\u8fde\u63a5\uff0c\u670d\u52a1\u5668\u7aef\u5c06TCP\u62a5\u6587\u6807\u5fd7\u4f4dSYN\u548cACK\u90fd\u7f6e\u4e3a1\uff0cack=J+1\uff0c\u968f\u673a\u4ea7\u751f\u4e00\u4e2a\u5e8f\u53f7\u503cseq=K\uff0c\u5e76\u5c06\u8be5\u6570\u636e\u5305\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u4ee5\u786e\u8ba4\u8fde\u63a5\u8bf7\u6c42\uff0c\u670d\u52a1\u5668\u7aef\u8fdb\u5165SYN_RCVD\u72b6\u6001\u3002"),(0,r.kt)("p",null,"\u7b2c\u4e09\u6b21\u63e1\u624b\uff1a\n\u5ba2\u6237\u7aef\u6536\u5230\u786e\u8ba4\u540e\uff0c\u68c0\u67e5ack\u662f\u5426\u4e3aJ+1\uff0cACK\u662f\u5426\u4e3a1\uff0c\u5982\u679c\u6b63\u786e\u5219\u5c06\u6807\u5fd7\u4f4dACK\u7f6e\u4e3a1\uff0cack=K+1\uff0c\u5e76\u5c06\u8be5\u6570\u636e\u5305\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7aef\uff0c\u670d\u52a1\u5668\u7aef\u68c0\u67e5ack\u662f\u5426\u4e3aK+1\uff0cACK\u662f\u5426\u4e3a1\uff0c\u5982\u679c\u6b63\u786e\u5219\u8fde\u63a5\u5efa\u7acb\u6210\u529f\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u8fdb\u5165ESTABLISHED\u72b6\u6001\uff0c\u5b8c\u6210\u4e09\u6b21\u63e1\u624b\uff0c\u968f\u540e\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u4e4b\u95f4\u53ef\u4ee5\u5f00\u59cb\u4f20\u8f93\u6570\u636e\u4e86\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"TCP ==> Transfer Control Protocol ==> \u4f20\u8f93\u63a7\u5236\u534f\u8bae\nTCP\u534f\u8bae\u7684\u7279\u70b9\n    * \u9762\u5411\u8fde\u63a5\u7684\u534f\u8bae\n    * \u53ea\u80fd\u7531\u5ba2\u6237\u7aef\u4e3b\u52a8\u53d1\u9001\u6570\u636e\u7ed9\u670d\u52a1\u5668\u7aef\uff0c\u670d\u52a1\u5668\u7aef\u63a5\u6536\u5230\u6570\u636e\u4e4b\u540e\uff0c\u53ef\u4ee5\u7ed9\u5ba2\u6237\u7aef\u54cd\u5e94\u6570\u636e\u3002\n    * \u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u5efa\u7acb\u8fde\u63a5\uff0c\u8fde\u63a5\u6210\u529f\u5f62\u6210\u6570\u636e\u4f20\u8f93\u901a\u9053\u3002\n    * \u901a\u8fc7\u56db\u6b21\u6325\u624b\u65ad\u5f00\u8fde\u63a5\n    * \u57fa\u4e8eIO\u6d41\u8fdb\u884c\u6570\u636e\u4f20\u8f93\n    * \u4f20\u8f93\u6570\u636e\u5927\u5c0f\u6ca1\u6709\u9650\u5236\n    * \u56e0\u4e3a\u9762\u5411\u8fde\u63a5\u7684\u534f\u8bae\uff0c\u901f\u5ea6\u6162\uff0c\u4f46\u662f\u662f\u53ef\u9760\u7684\u534f\u8bae\u3002\n\nTCP\u534f\u8bae\u7684\u4f7f\u7528\u573a\u666f\n    * \u6587\u4ef6\u4e0a\u4f20\u548c\u4e0b\u8f7d\n    * \u90ae\u4ef6\u53d1\u9001\u548c\u63a5\u6536\n    * \u8fdc\u7a0b\u767b\u5f55\n\nTCP\u534f\u8bae\u76f8\u5173\u7684\u7c7b\n    * Socket\n        * \u4e00\u4e2a\u8be5\u7c7b\u7684\u5bf9\u8c61\u5c31\u4ee3\u8868\u4e00\u4e2a\u5ba2\u6237\u7aef\u7a0b\u5e8f\u3002\n    * ServerSocket\n        * \u4e00\u4e2a\u8be5\u7c7b\u7684\u5bf9\u8c61\u5c31\u4ee3\u8868\u4e00\u4e2a\u670d\u52a1\u5668\u7aef\u7a0b\u5e8f\u3002\n\nSocket\u7c7b\u6784\u9020\u65b9\u6cd5\n    * Socket(String host, int port)\n        * \u6839\u636eip\u5730\u5740\u5b57\u7b26\u4e32\u548c\u7aef\u53e3\u53f7\u521b\u5efa\u5ba2\u6237\u7aefSocket\u5bf9\u8c61\n        * \u6ce8\u610f\u4e8b\u9879\uff1a\u53ea\u8981\u6267\u884c\u8be5\u65b9\u6cd5\uff0c\u5c31\u4f1a\u7acb\u5373\u8fde\u63a5\u6307\u5b9a\u7684\u670d\u52a1\u5668\u7a0b\u5e8f\uff0c\u5982\u679c\u8fde\u63a5\u4e0d\u6210\u529f\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\n            \u5982\u679c\u8fde\u63a5\u6210\u529f\uff0c\u5219\u8868\u793a\u4e09\u6b21\u63e1\u624b\u901a\u8fc7\u3002\n\nSocket\u7c7b\u5e38\u7528\u65b9\u6cd5\n    * OutputStream getOutputStream(); \u83b7\u5f97\u5b57\u8282\u8f93\u51fa\u6d41\u5bf9\u8c61\n    * InputStream getInputStream();\u83b7\u5f97\u5b57\u8282\u8f93\u5165\u6d41\u5bf9\u8c61\n")),(0,r.kt)("h2",{id:"32-tcp\u901a\u4fe1\u6848\u4f8b"},"3.2 TCP\u901a\u4fe1\u6848\u4f8b"),(0,r.kt)("h3",{id:"322-\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e"},"3.2.2 \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'/*\nTCP\u5ba2\u6237\u7aef\u4ee3\u7801\u5b9e\u73b0\u6b65\u9aa4\n        * \u521b\u5efa\u5ba2\u6237\u7aefSocket\u5bf9\u8c61\u5e76\u6307\u5b9a\u670d\u52a1\u5668\u5730\u5740\u548c\u7aef\u53e3\u53f7\n        * \u8c03\u7528Socket\u5bf9\u8c61\u7684getOutputStream\u65b9\u6cd5\u83b7\u5f97\u5b57\u8282\u8f93\u51fa\u6d41\u5bf9\u8c61\n        * \u8c03\u7528\u5b57\u8282\u8f93\u51fa\u6d41\u5bf9\u8c61\u7684write\u65b9\u6cd5\u5f80\u670d\u52a1\u5668\u7aef\u8f93\u51fa\u6570\u636e\n        * \u8c03\u7528Socket\u5bf9\u8c61\u7684getInputStream\u65b9\u6cd5\u83b7\u5f97\u5b57\u8282\u8f93\u5165\u6d41\u5bf9\u8c61\n        * \u8c03\u7528\u5b57\u8282\u8f93\u5165\u6d41\u5bf9\u8c61\u7684read\u65b9\u6cd5\u8bfb\u53d6\u670d\u52a1\u5668\u7aef\u8fd4\u56de\u7684\u6570\u636e\n        * \u5173\u95edSocket\u5bf9\u8c61\u65ad\u5f00\u8fde\u63a5\u3002\n */\n// TCP\u5ba2\u6237\u7aef\u4ee3\u7801\u5b9e\u73b0\npublic class TCPClient {\n    public static void main(String[] args) throws Exception{\n        // \u8981\u53d1\u9001\u7684\u5185\u5bb9\n        String content = "\u4f60\u597dTCP\u670d\u52a1\u5668\u7aef\uff0c\u7ea6\u5417";\n        // \u521b\u5efaSocket\u5bf9\u8c61\n        Socket socket = new Socket("192.168.73.99",9999);\n        // System.out.println(socket);\n        // \u83b7\u5f97\u5b57\u8282\u8f93\u51fa\u6d41\u5bf9\u8c61\n        OutputStream out = socket.getOutputStream();\n        // \u8f93\u51fa\u6570\u636e\u5230\u670d\u52a1\u5668\u7aef\n        out.write(content.getBytes());\n\n        // \u83b7\u5f97\u5b57\u8282\u8f93\u5165\u6d41\u5bf9\u8c61\n        InputStream in = socket.getInputStream();\n        // \u521b\u5efa\u5b57\u8282\u6570\u7ec4\uff1a\u7528\u6765\u5b58\u50a8\u8bfb\u53d6\u5230\u670d\u52a1\u5668\u7aef\u6570\u636e\n        byte[] buf = new byte[1024];\n        // \u8bfb\u53d6\u670d\u52a1\u5668\u7aef\u8fd4\u56de\u7684\u6570\u636e\n        int len = in.read(buf);\n        System.out.println("len = " + len);\n        System.out.println("\u670d\u52a1\u5668\u7aef\u8fd4\u56de\u7684\u5185\u5bb9 = " + new String(buf,0,len));\n\n        // \u5173\u95edsocket\u5bf9\u8c61\n        socket.close();\n    }\n}\n')),(0,r.kt)("h3",{id:"333-\u670d\u52a1\u5668\u5411\u5ba2\u6237\u7aef\u56de\u5199\u6570\u636e"},"3.3.3 \u670d\u52a1\u5668\u5411\u5ba2\u6237\u7aef\u56de\u5199\u6570\u636e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'/**\n    TCP\u670d\u52a1\u5668\u7aef\u4ee3\u7801\u5b9e\u73b0\n\n    ServerSocket\u7c7b\u6784\u9020\u65b9\u6cd5\n        * ServerSocket(int port) \u6839\u636e\u6307\u5b9a\u7684\u7aef\u53e3\u53f7\u5f00\u542f\u670d\u52a1\u5668\u3002\n\n    ServerSocket\u7c7b\u5e38\u7528\u65b9\u6cd5\n        *  Socket accept() \u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5\u5e76\u83b7\u5f97\u4e0e\u5ba2\u6237\u7aef\u5173\u8054\u7684Socket\u5bf9\u8c61\n\n    TCP\u670d\u52a1\u5668\u7aef\u4ee3\u7801\u5b9e\u73b0\u6b65\u9aa4\n        * \u521b\u5efaServerSocket\u5bf9\u8c61\u5e76\u6307\u5b9a\u7aef\u53e3\u53f7(\u76f8\u5f53\u4e8e\u5f00\u542f\u4e86\u4e00\u4e2a\u670d\u52a1\u5668)\n        * \u8c03\u7528ServerSocket\u5bf9\u8c61\u7684accept\u65b9\u6cd5\u7b49\u5f85\u5ba2\u7aef\u6237\u8fde\u63a5\u5e76\u83b7\u5f97\u5bf9\u5e94Socket\u5bf9\u8c61\n        * \u8c03\u7528Socket\u5bf9\u8c61\u7684getInputStream\u65b9\u6cd5\u83b7\u5f97\u5b57\u8282\u8f93\u5165\u6d41\u5bf9\u8c61\n        * \u8c03\u7528\u5b57\u8282\u8f93\u5165\u6d41\u5bf9\u8c61\u7684read\u65b9\u6cd5\u8bfb\u53d6\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6570\u636e\n        * \u8c03\u7528Socket\u5bf9\u8c61\u7684getOutputStream\u65b9\u6cd5\u83b7\u5f97\u5b57\u8282\u8f93\u51fa\u6d41\u5bf9\u8c61\n        * \u8c03\u7528\u5b57\u8282\u8f93\u51fa\u6d41\u5bf9\u8c61\u7684write\u65b9\u6cd5\u5f80\u5ba2\u6237\u7aef\u8f93\u51fa\u6570\u636e\n        * \u5173\u95edSocket\u548cServerSocket\u5bf9\u8c61\n */\npublic class TCPServer {\n    public static void main(String[] args)throws Exception{\n        // \u521b\u5efa\u670d\u52a1\u5668ocket\u5bf9\u8c61\n        ServerSocket serverSocket = new ServerSocket(9999);\n        // \u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5\u5e76\u83b7\u5f97\u4e0e\u5ba2\u6237\u7aef\u5173\u8054\u7684Socket\u5bf9\u8c61\n        Socket socket = serverSocket.accept();\n        // \u83b7\u5f97\u5b57\u8282\u8f93\u5165\u6d41\u5bf9\u8c61\n        InputStream in = socket.getInputStream();\n        // \u521b\u5efa\u5b57\u8282\u6570\u7ec4\uff1a\u7528\u6765\u5b58\u50a8\u8bfb\u53d6\u5230\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6570\u636e\n        byte[] buf = new byte[1024];\n        // \u8bfb\u53d6\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\n        int len = in.read(buf);\n        System.out.println("len = " + len);\n        System.out.println("\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6570\u636e = " + new String(buf,0,len));\n\n        // \u83b7\u5f97\u5b57\u8282\u8f93\u51fa\u6d41\u5bf9\u8c61\n        OutputStream out = socket.getOutputStream();\n        // \u5f80\u5ba2\u6237\u7aef\u8f93\u51fa\u6570\u636e\n        out.write("\u7ea6\u4f60\u59b9".getBytes());\n       \n        \n        // \u5173\u95edsocket\n        socket.close();\n        // \u5173\u95ed\u670d\u52a1\u5668\uff08\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u670d\u52a1\u5668\u4e00\u822c\u4e0d\u4f1a\u5173\u95ed\uff09\n        serverSocket.close();\n    }\n}\n')),(0,r.kt)("h1",{id:"\u7b2c\u56db\u7ae0-\u7efc\u5408\u6848\u4f8b"},"\u7b2c\u56db\u7ae0 \u7efc\u5408\u6848\u4f8b"),(0,r.kt)("h2",{id:"41-\u6587\u4ef6\u4e0a\u4f20\u6848\u4f8b"},"4.1 \u6587\u4ef6\u4e0a\u4f20\u6848\u4f8b"),(0,r.kt)("h3",{id:"\u6587\u4ef6\u4e0a\u4f20\u5206\u6790\u56fe\u89e3"},"\u6587\u4ef6\u4e0a\u4f20\u5206\u6790\u56fe\u89e3"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u3010\u5ba2\u6237\u7aef\u3011\u8f93\u5165\u6d41\uff0c\u4ece\u786c\u76d8\u8bfb\u53d6\u6587\u4ef6\u6570\u636e\u5230\u7a0b\u5e8f\u4e2d\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u3010\u5ba2\u6237\u7aef\u3011\u8f93\u51fa\u6d41\uff0c\u5199\u51fa\u6587\u4ef6\u6570\u636e\u5230\u670d\u52a1\u7aef\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u3010\u670d\u52a1\u7aef\u3011\u8f93\u5165\u6d41\uff0c\u8bfb\u53d6\u6587\u4ef6\u6570\u636e\u5230\u670d\u52a1\u7aef\u7a0b\u5e8f\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u3010\u670d\u52a1\u7aef\u3011\u8f93\u51fa\u6d41\uff0c\u5199\u51fa\u6587\u4ef6\u6570\u636e\u5230\u670d\u52a1\u5668\u786c\u76d8\u4e2d\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u3010\u670d\u52a1\u7aef\u3011\u83b7\u53d6\u8f93\u51fa\u6d41\uff0c\u56de\u5199\u6570\u636e\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u3010\u5ba2\u6237\u7aef\u3011\u83b7\u53d6\u8f93\u5165\u6d41\uff0c\u89e3\u6790\u56de\u5199\u6570\u636e\u3002"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566446548503",src:n(90107).Z})),(0,r.kt)("h3",{id:"\u6848\u4f8b\u5b9e\u73b0"},"\u6848\u4f8b\u5b9e\u73b0"),(0,r.kt)("p",null,"\u670d\u52a1\u5668\u7aef\u5b9e\u73b0\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class FileUpload_Server {\n    public static void main(String[] args) throws IOException {\n        System.out.println("\u670d\u52a1\u5668 \u542f\u52a8.....  ");\n        // 1. \u521b\u5efa\u670d\u52a1\u7aefServerSocket\n        ServerSocket serverSocket = new ServerSocket(6666);\n        // 2. \u5faa\u73af\u63a5\u6536,\u5efa\u7acb\u8fde\u63a5\n        while (true) {\n            Socket accept = serverSocket.accept();\n            /*\n            3. socket\u5bf9\u8c61\u4ea4\u7ed9\u5b50\u7ebf\u7a0b\u5904\u7406,\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\n               Runnable\u63a5\u53e3\u4e2d,\u53ea\u6709\u4e00\u4e2arun\u65b9\u6cd5,\u4f7f\u7528lambda\u8868\u8fbe\u5f0f\u7b80\u5316\u683c\u5f0f\n            */\n            new Thread(() -> {\n                try (\n                    //3.1 \u83b7\u53d6\u8f93\u5165\u6d41\u5bf9\u8c61\n                    BufferedInputStream bis = new BufferedInputStream(accept.getInputStream());\n                    //3.2 \u521b\u5efa\u8f93\u51fa\u6d41\u5bf9\u8c61, \u4fdd\u5b58\u5230\u672c\u5730 .\n                    FileOutputStream fis = new FileOutputStream(System.currentTimeMillis() + ".jpg");\n                    BufferedOutputStream bos = new BufferedOutputStream(fis);\n                ) {\n                    // 3.3 \u8bfb\u5199\u6570\u636e\n                    byte[] b = new byte[1024 * 8];\n                    int len;\n                    while ((len = bis.read(b)) != -1) {\n                        bos.write(b, 0, len);\n                    }\n\n                    // 4.=======\u4fe1\u606f\u56de\u5199===========================\n                    System.out.println("back ........");\n                    OutputStream out = accept.getOutputStream();\n                    out.write("\u4e0a\u4f20\u6210\u529f".getBytes());\n                    out.close();\n                    //================================\n\n                    //5. \u5173\u95ed \u8d44\u6e90\n                    bos.close();\n                    bis.close();\n                    accept.close();\n                    System.out.println("\u6587\u4ef6\u4e0a\u4f20\u5df2\u4fdd\u5b58");\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }).start();\n        }\n    }\n}\n')),(0,r.kt)("p",null,"\u5ba2\u6237\u7aef\u5b9e\u73b0\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class FileUpload_Client {\n    public static void main(String[] args) throws IOException {\n        // 1.\u521b\u5efa\u6d41\u5bf9\u8c61\n        // 1.1 \u521b\u5efa\u8f93\u5165\u6d41,\u8bfb\u53d6\u672c\u5730\u6587\u4ef6\n        BufferedInputStream bis = new BufferedInputStream(new FileInputStream("test.jpg"));\n        // 1.2 \u521b\u5efa\u8f93\u51fa\u6d41,\u5199\u5230\u670d\u52a1\u7aef\n        Socket socket = new Socket("localhost", 6666);\n        BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream());\n\n        //2.\u5199\u51fa\u6570\u636e.\n        byte[] b  = new byte[1024 * 8 ];\n        int len ;\n        while (( len  = bis.read(b))!=-1) {\n            bos.write(b, 0, len);\n        }\n        // \u5173\u95ed\u8f93\u51fa\u6d41,\u901a\u77e5\u670d\u52a1\u7aef,\u5199\u51fa\u6570\u636e\u5b8c\u6bd5\n        socket.shutdownOutput();\n        System.out.println("\u6587\u4ef6\u53d1\u9001\u5b8c\u6bd5");\n        // 3. =====\u89e3\u6790\u56de\u5199============\n        InputStream in = socket.getInputStream();\n        byte[] back = new byte[20];\n        in.read(back);\n        System.out.println(new String(back));\n        in.close();\n        // ============================\n\n        // 4.\u91ca\u653e\u8d44\u6e90\n        socket.close();\n        bis.close();\n    }\n}\n')),(0,r.kt)("h2",{id:"42-\u6a21\u62dfbs\u670d\u52a1\u5668"},"4.2 \u6a21\u62dfB\\S\u670d\u52a1\u5668"),(0,r.kt)("p",null,"\u6a21\u62df\u7f51\u7ad9\u670d\u52a1\u5668\uff0c\u4f7f\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\u81ea\u5df1\u7f16\u5199\u7684\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u67e5\u770b\u7f51\u9875\u6548\u679c\u3002"),(0,r.kt)("h3",{id:"\u6848\u4f8b\u5206\u6790"},"\u6848\u4f8b\u5206\u6790"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u51c6\u5907\u9875\u9762\u6570\u636e\uff0cweb\u6587\u4ef6\u5939\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u6211\u4eec\u6a21\u62df\u670d\u52a1\u5668\u7aef\uff0cServerSocket\u7c7b\u76d1\u542c\u7aef\u53e3\uff0c\u4f7f\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u67e5\u770b\u7f51\u9875\u6548\u679c")),(0,r.kt)("h3",{id:"\u6848\u4f8b\u5b9e\u73b0-1"},"\u6848\u4f8b\u5b9e\u73b0"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u5de5\u4f5c\u539f\u7406\u662f\u9047\u5230\u56fe\u7247\u4f1a\u5f00\u542f\u4e00\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u5355\u72ec\u7684\u8bbf\u95ee,\u56e0\u6b64\u5728\u670d\u52a1\u5668\u7aef\u52a0\u5165\u7ebf\u7a0b\u6280\u672f\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class ServerDemo {\n    public static void main(String[] args) throws IOException {\n        ServerSocket server = new ServerSocket(8888);\n        while(true){\n            Socket socket = server.accept();\n            new Thread(new Web(socket)).start();\n        }\n    }\n}  \n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'class Web implements Runnable{\n    private Socket socket;\n\n    public Web(Socket socket){\n        this.socket=socket;\n    }\n\n    public void run() {\n        try{\n            //\u8f6c\u6362\u6d41,\u8bfb\u53d6\u6d4f\u89c8\u5668\u8bf7\u6c42\u7b2c\u4e00\u884c\n            BufferedReader readWb = new\n                    BufferedReader(new InputStreamReader(socket.getInputStream()));\n            String requst = readWb.readLine();\n            //\u53d6\u51fa\u8bf7\u6c42\u8d44\u6e90\u7684\u8def\u5f84\n            String[] strArr = requst.split(" ");\n            System.out.println(Arrays.toString(strArr));\n            String path = strArr[1].substring(1);\n            System.out.println(path);\n\n            FileInputStream fis = new FileInputStream(path);\n            System.out.println(fis);\n            byte[] bytes= new byte[1024];\n            int len = 0 ;\n\n            //\u5411\u6d4f\u89c8\u5668 \u56de\u5199\u6570\u636e\n            OutputStream out = socket.getOutputStream();\n            out.write("HTTP/1.1 200 OK\\r\\n".getBytes());\n            out.write("Content-Type:text/html\\r\\n".getBytes());\n            out.write("\\r\\n".getBytes());\n            while((len = fis.read(bytes))!=-1){\n                out.write(bytes,0,len);\n            }\n            fis.close();\n            out.close();\n            readWb.close();\n            socket.close();\n        }catch(Exception ex){\n\n        }\n    }\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8bbf\u95ee\u6548\u679c\uff1a")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566446578300",src:n(75858).Z})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u56fe\u89e3\uff1a")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1566446643154",src:n(62263).Z})),(0,r.kt)("h1",{id:"\u7b2c\u4e94\u7ae0-nio"},"\u7b2c\u4e94\u7ae0 NIO"),(0,r.kt)("h2",{id:"51-nio\u6982\u8ff0"},"5.1 NIO\u6982\u8ff0"),(0,r.kt)("h3",{id:"511--nio\u5f15\u5165"},"5.1.1  NIO\u5f15\u5165"),(0,r.kt)("p",null,"\u5728\u6211\u4eec\u5b66\u4e60Java\u7684NIO\u6d41\u4e4b\u524d\uff0c\u6211\u4eec\u90fd\u8981\u4e86\u89e3\u51e0\u4e2a\u5173\u952e\u8bcd"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u540c\u6b65\u4e0e\u5f02\u6b65\uff08synchronous/asynchronous\uff09\uff1a",(0,r.kt)("strong",{parentName:"li"},"\u540c\u6b65"),"\u662f\u4e00\u79cd\u53ef\u9760\u7684\u6709\u5e8f\u8fd0\u884c\u673a\u5236\uff0c\u5f53\u6211\u4eec\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u65f6\uff0c\u540e\u7eed\u7684\u4efb\u52a1\u662f\u7b49\u5f85\u5f53\u524d\u8c03\u7528\u8fd4\u56de\uff0c\u624d\u4f1a\u8fdb\u884c\u4e0b\u4e00\u6b65\uff1b\u800c",(0,r.kt)("strong",{parentName:"li"},"\u5f02\u6b65"),"\u5219\u76f8\u53cd\uff0c\u5176\u4ed6\u4efb\u52a1\u4e0d\u9700\u8981\u7b49\u5f85\u5f53\u524d\u8c03\u7528\u8fd4\u56de\uff0c\u901a\u5e38\u4f9d\u9760\u4e8b\u4ef6\u3001\u56de\u8c03\u7b49\u673a\u5236\u6765\u5b9e\u73b0\u4efb\u52a1\u95f4\u6b21\u5e8f\u5173\u7cfb"),(0,r.kt)("li",{parentName:"ul"},"\u963b\u585e\u4e0e\u975e\u963b\u585e\uff1a\u5728\u8fdb\u884c",(0,r.kt)("strong",{parentName:"li"},"\u963b\u585e"),"\u64cd\u4f5c\u65f6\uff0c\u5f53\u524d\u7ebf\u7a0b\u4f1a\u5904\u4e8e\u963b\u585e\u72b6\u6001\uff0c\u65e0\u6cd5\u4ece\u4e8b\u5176\u4ed6\u4efb\u52a1\uff0c\u53ea\u6709\u5f53\u6761\u4ef6\u5c31\u7eea\u624d\u80fd\u7ee7\u7eed\uff0c\u6bd4\u5982ServerSocket\u65b0\u8fde\u63a5\u5efa\u7acb\u5b8c\u6bd5\uff0c\u6216\u8005\u6570\u636e\u8bfb\u53d6\u3001\u5199\u5165\u64cd\u4f5c\u5b8c\u6210\uff1b\u800c",(0,r.kt)("strong",{parentName:"li"},"\u975e\u963b\u585e"),"\u5219\u662f\u4e0d\u7ba1IO\u64cd\u4f5c\u662f\u5426\u7ed3\u675f\uff0c\u76f4\u63a5\u8fd4\u56de\uff0c\u76f8\u5e94\u64cd\u4f5c\u5728\u540e\u53f0\u7ee7\u7eed\u5904\u7406")),(0,r.kt)("p",null,"\u5728Java1.4\u4e4b\u524d\u7684I/O\u7cfb\u7edf\u4e2d\uff0c\u63d0\u4f9b\u7684\u90fd\u662f\u9762\u5411\u6d41\u7684I/O\u7cfb\u7edf\uff0c\u7cfb\u7edf\u4e00\u6b21\u4e00\u4e2a\u5b57\u8282\u5730\u5904\u7406\u6570\u636e\uff0c\u4e00\u4e2a\u8f93\u5165\u6d41\u4ea7\u751f\u4e00\u4e2a\u5b57\u8282\u7684\u6570\u636e\uff0c\u4e00\u4e2a\u8f93\u51fa\u6d41\u6d88\u8d39\u4e00\u4e2a\u5b57\u8282\u7684\u6570\u636e\uff0c\u9762\u5411\u6d41\u7684I/O\u901f\u5ea6\u975e\u5e38\u6162\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u800c\u5728Java 1.4\u4e2d\u63a8\u51fa\u4e86NIO\uff0c\u8fd9\u662f\u4e00\u4e2a\u9762\u5411\u5757\u7684I/O\u7cfb\u7edf\uff0c\u7cfb\u7edf\u4ee5\u5757\u7684\u65b9\u5f0f\u5904\u7406\u5904\u7406\uff0c\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u5728\u4e00\u6b65\u4e2d\u4ea7\u751f\u6216\u8005\u6d88\u8d39\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u6309\u5757\u5904\u7406\u8981\u6bd4\u6309\u5b57\u8282\u5904\u7406\u6570\u636e\u5feb\u7684\u591a\u3002")),(0,r.kt)("p",null,"\u5728 Java 7 \u4e2d\uff0cNIO \u6709\u4e86\u8fdb\u4e00\u6b65\u7684\u6539\u8fdb\uff0c\u4e5f\u5c31\u662f NIO 2\uff0c\u5f15\u5165\u4e86\u5f02\u6b65\u975e\u963b\u585e IO \u65b9\u5f0f\uff0c\u4e5f\u6709\u5f88\u591a\u4eba\u53eb\u5b83 AIO\uff08Asynchronous IO\uff09\u3002\u5f02\u6b65 IO \u64cd\u4f5c\u57fa\u4e8e\u4e8b\u4ef6\u548c\u56de\u8c03\u673a\u5236\uff0c\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\uff0c\u5e94\u7528\u64cd\u4f5c\u76f4\u63a5\u8fd4\u56de\uff0c\u800c\u4e0d\u4f1a\u963b\u585e\u5728\u90a3\u91cc\uff0c\u5f53\u540e\u53f0\u5904\u7406\u5b8c\u6210\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u901a\u77e5\u76f8\u5e94\u7ebf\u7a0b\u8fdb\u884c\u540e\u7eed\u5de5\u4f5c\u3002"),(0,r.kt)("h2",{id:"52-nio\u540c\u6b65\u975e\u963b\u585e"},"5.2 NIO(\u540c\u6b65\u3001\u975e\u963b\u585e)"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NIO\u4e4b\u6240\u4ee5\u662f\u540c\u6b65\uff0c\u662f\u56e0\u4e3a\u5b83\u7684accept/read/write\u65b9\u6cd5\u7684\u5185\u6838I/O\u64cd\u4f5c\u90fd\u4f1a\u963b\u585e\u5f53\u524d\u7ebf\u7a0b")),(0,r.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u8981\u5148\u4e86\u89e3\u4e00\u4e0bNIO\u7684\u4e09\u4e2a\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\uff1aChannel\uff08\u901a\u9053\uff09\u3001Buffer\uff08\u7f13\u51b2\u533a\uff09\u3001Selector\uff08\u9009\u62e9\u5668\uff09"),(0,r.kt)("h3",{id:"521-channel\u901a\u9053"},(0,r.kt)("strong",{parentName:"h3"},"5.2.1 Channel\uff08\u901a\u9053\uff09")),(0,r.kt)("p",null,"Channel\uff08\u901a\u9053\uff09\uff1aChannel\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b83\u8bfb\u53d6\u548c\u5199\u5165\u6570\u636e\u3002\u53ef\u4ee5\u628a\u5b83\u770b\u505a\u662fIO\u4e2d\u7684\u6d41\uff0c\u4e0d\u540c\u7684\u662f\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Channel\u662f\u53cc\u5411\u7684\uff0c\u65e2\u53ef\u4ee5\u8bfb\u53c8\u53ef\u4ee5\u5199\uff0c\u800c\u6d41\u662f\u5355\u5411\u7684"),(0,r.kt)("li",{parentName:"ul"},"Channel\u53ef\u4ee5\u8fdb\u884c\u5f02\u6b65\u7684\u8bfb\u5199"),(0,r.kt)("li",{parentName:"ul"},"\u5bf9Channel\u7684\u8bfb\u5199\u5fc5\u987b\u901a\u8fc7buffer\u5bf9\u8c61")),(0,r.kt)("p",null,"\u6b63\u5982\u4e0a\u9762\u63d0\u5230\u7684\uff0c\u6240\u6709\u6570\u636e\u90fd\u901a\u8fc7Buffer\u5bf9\u8c61\u5904\u7406\uff0c\u6240\u4ee5\uff0c\u60a8\u6c38\u8fdc\u4e0d\u4f1a\u5c06\u5b57\u8282\u76f4\u63a5\u5199\u5165\u5230Channel\u4e2d\uff0c\u76f8\u53cd\uff0c\u60a8\u662f\u5c06\u6570\u636e\u5199\u5165\u5230Buffer\u4e2d\uff1b\u540c\u6837\uff0c\u60a8\u4e5f\u4e0d\u4f1a\u4eceChannel\u4e2d\u8bfb\u53d6\u5b57\u8282\uff0c\u800c\u662f\u5c06\u6570\u636e\u4eceChannel\u8bfb\u5165Buffer\uff0c\u518d\u4eceBuffer\u83b7\u53d6\u8fd9\u4e2a\u5b57\u8282\u3002"),(0,r.kt)("p",null,"\u56e0\u4e3aChannel\u662f\u53cc\u5411\u7684\uff0c\u6240\u4ee5Channel\u53ef\u4ee5\u6bd4\u6d41\u66f4\u597d\u5730\u53cd\u6620\u51fa\u5e95\u5c42\u64cd\u4f5c\u7cfb\u7edf\u7684\u771f\u5b9e\u60c5\u51b5\u3002\u7279\u522b\u662f\u5728Unix\u6a21\u578b\u4e2d\uff0c\u5e95\u5c42\u64cd\u4f5c\u7cfb\u7edf\u901a\u5e38\u90fd\u662f\u53cc\u5411\u7684\u3002"),(0,r.kt)("p",null,"\u5728Java NIO\u4e2d\u7684Channel\u4e3b\u8981\u6709\u5982\u4e0b\u51e0\u79cd\u7c7b\u578b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"FileChannel\uff1a\u4ece\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\u7684"),(0,r.kt)("li",{parentName:"ul"},"DatagramChannel\uff1a\u8bfb\u5199UDP\u7f51\u7edc\u534f\u8bae\u6570\u636e"),(0,r.kt)("li",{parentName:"ul"},"SocketChannel\uff1a\u8bfb\u5199TCP\u7f51\u7edc\u534f\u8bae\u6570\u636e"),(0,r.kt)("li",{parentName:"ul"},"ServerSocketChannel\uff1a\u53ef\u4ee5\u76d1\u542cTCP\u8fde\u63a5")),(0,r.kt)("h3",{id:"522-buffer"},"5.2.2 Buffer"),(0,r.kt)("p",null,"Buffer\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u5305\u542b\u4e00\u4e9b\u8981\u5199\u5165\u6216\u8005\u8bfb\u5230Stream\u5bf9\u8c61\u7684\u3002\u5e94\u7528\u7a0b\u5e8f\u4e0d\u80fd\u76f4\u63a5\u5bf9 Channel \u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\uff0c\u800c\u5fc5\u987b\u901a\u8fc7 Buffer \u6765\u8fdb\u884c\uff0c\u5373 Channel \u662f\u901a\u8fc7 Buffer \u6765\u8bfb\u5199\u6570\u636e\u7684\u3002"),(0,r.kt)("p",null,"\u5728NIO\u4e2d\uff0c\u6240\u6709\u7684\u6570\u636e\u90fd\u662f\u7528Buffer\u5904\u7406\u7684\uff0c\u5b83\u662fNIO\u8bfb\u5199\u6570\u636e\u7684\u4e2d\u8f6c\u6c60\u3002Buffer\u5b9e\u8d28\u4e0a\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u901a\u5e38\u662f\u4e00\u4e2a\u5b57\u8282\u6570\u636e\uff0c\u4f46\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u7c7b\u578b\u7684\u6570\u7ec4\u3002\u4f46\u4e00\u4e2a\u7f13\u51b2\u533a\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u91cd\u8981\u7684\u662f\u5b83\u63d0\u4f9b\u4e86\u5bf9\u6570\u636e\u7684\u7ed3\u6784\u5316\u8bbf\u95ee\uff0c\u800c\u4e14\u8fd8\u53ef\u4ee5\u8ddf\u8e2a\u7cfb\u7edf\u7684\u8bfb\u5199\u8fdb\u7a0b\u3002"),(0,r.kt)("p",null,"\u4f7f\u7528 Buffer \u8bfb\u5199\u6570\u636e\u4e00\u822c\u9075\u5faa\u4ee5\u4e0b\u56db\u4e2a\u6b65\u9aa4\uff1a"),(0,r.kt)("p",null,"1.\u5199\u5165\u6570\u636e\u5230 Buffer\uff1b"),(0,r.kt)("p",null,"2.\u8c03\u7528 flip() \u65b9\u6cd5\uff1b"),(0,r.kt)("p",null,"3.\u4ece Buffer \u4e2d\u8bfb\u53d6\u6570\u636e\uff1b"),(0,r.kt)("p",null,"4.\u8c03\u7528 clear() \u65b9\u6cd5\u6216\u8005 compact() \u65b9\u6cd5\u3002"),(0,r.kt)("p",null,"\u5f53\u5411 Buffer \u5199\u5165\u6570\u636e\u65f6\uff0cBuffer \u4f1a\u8bb0\u5f55\u4e0b\u5199\u4e86\u591a\u5c11\u6570\u636e\u3002\u4e00\u65e6\u8981\u8bfb\u53d6\u6570\u636e\uff0c\u9700\u8981\u901a\u8fc7 flip() \u65b9\u6cd5\u5c06 Buffer \u4ece\u5199\u6a21\u5f0f\u5207\u6362\u5230\u8bfb\u6a21\u5f0f\u3002\u5728\u8bfb\u6a21\u5f0f\u4e0b\uff0c\u53ef\u4ee5\u8bfb\u53d6\u4e4b\u524d\u5199\u5165\u5230 Buffer \u7684\u6240\u6709\u6570\u636e\u3002"),(0,r.kt)("p",null,"\u4e00\u65e6\u8bfb\u5b8c\u4e86\u6240\u6709\u7684\u6570\u636e\uff0c\u5c31\u9700\u8981\u6e05\u7a7a\u7f13\u51b2\u533a\uff0c\u8ba9\u5b83\u53ef\u4ee5\u518d\u6b21\u88ab\u5199\u5165\u3002\u6709\u4e24\u79cd\u65b9\u5f0f\u80fd\u6e05\u7a7a\u7f13\u51b2\u533a\uff1a\u8c03\u7528 clear() \u6216 compact() \u65b9\u6cd5\u3002clear() \u65b9\u6cd5\u4f1a\u6e05\u7a7a\u6574\u4e2a\u7f13\u51b2\u533a\u3002compact() \u65b9\u6cd5\u53ea\u4f1a\u6e05\u9664\u5df2\u7ecf\u8bfb\u8fc7\u7684\u6570\u636e\u3002\u4efb\u4f55\u672a\u8bfb\u7684\u6570\u636e\u90fd\u88ab\u79fb\u5230\u7f13\u51b2\u533a\u7684\u8d77\u59cb\u5904\uff0c\u65b0\u5199\u5165\u7684\u6570\u636e\u5c06\u653e\u5230\u7f13\u51b2\u533a\u672a\u8bfb\u6570\u636e\u7684\u540e\u9762\u3002"),(0,r.kt)("p",null,"Buffer\u4e3b\u8981\u6709\u5982\u4e0b\u51e0\u79cd\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ByteBuffer"),(0,r.kt)("li",{parentName:"ul"},"CharBuffer"),(0,r.kt)("li",{parentName:"ul"},"DoubleBuffer"),(0,r.kt)("li",{parentName:"ul"},"FloatBuffer"),(0,r.kt)("li",{parentName:"ul"},"IntBuffer"),(0,r.kt)("li",{parentName:"ul"},"LongBuffer"),(0,r.kt)("li",{parentName:"ul"},"ShortBuffer")),(0,r.kt)("p",null,"\u6211\u4eec\u5c06\u901a\u8fc7CopyFile\u8fd9\u4e2a\u5b9e\u529b\u8ba9\u5927\u5bb6\u4f53\u4f1aNIO\u7684\u64cd\u4f5c\u8fc7\u7a0b\u3002CopyFile\u6267\u884c\u4e09\u4e2a\u57fa\u672c\u7684\u64cd\u4f5c\uff1a\u521b\u5efa\u4e00\u4e2aBuffer\uff0c\u7136\u540e\u4ece\u6e90\u6587\u4ef6\u8bfb\u53d6\u6570\u636e\u5230\u7f13\u51b2\u533a\uff0c\u7136\u540e\u518d\u5c06\u7f13\u51b2\u533a\u5199\u5165\u76ee\u6807\u6587\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public static void copyFileUseNIO(String src,String dst) throws IOException{\n//\u58f0\u660e\u6e90\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6\n        FileInputStream fi=new FileInputStream(new File(src));\n        FileOutputStream fo=new FileOutputStream(new File(dst));\n        //\u83b7\u5f97\u4f20\u8f93\u901a\u9053channel\n        FileChannel inChannel=fi.getChannel();\n        FileChannel outChannel=fo.getChannel();\n        //\u83b7\u5f97\u5bb9\u5668buffer\n        ByteBuffer buffer=ByteBuffer.allocate(1024);\n        while(true){\n            //\u5224\u65ad\u662f\u5426\u8bfb\u5b8c\u6587\u4ef6\n            int eof =inChannel.read(buffer);\n            if(eof==-1){\n                break;  \n            }\n            //\u91cd\u8bbe\u4e00\u4e0bbuffer\u7684position=0\uff0climit=position\n            buffer.flip();\n            //\u5f00\u59cb\u5199\n            outChannel.write(buffer);\n            //\u5199\u5b8c\u8981\u91cd\u7f6ebuffer\uff0c\u91cd\u8bbeposition=0,limit=capacity\n            buffer.clear();\n        }\n        inChannel.close();\n        outChannel.close();\n        fi.close();\n        fo.close();\n}   \n")),(0,r.kt)("h3",{id:"523-selector"},"5.2.3 Selector"),(0,r.kt)("p",null,"\u9996\u5148\u9700\u8981\u4e86\u89e3\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662f\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u5f00\u9500\u4f1a\u5728\u9ad8\u5e76\u53d1\u65f6\u53d8\u5f97\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u540c\u6b65\u963b\u585e\u65b9\u5f0f\u7684\u4f4e\u6269\u5c55\u6027\u52a3\u52bf\u3002"),(0,r.kt)("p",null,"Selector\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u53ef\u4ee5\u6ce8\u518c\u5230\u5f88\u591a\u4e2aChannel\u4e0a\uff0c\u76d1\u542c\u5404\u4e2aChannel\u4e0a\u53d1\u751f\u7684\u4e8b\u4ef6\uff0c\u5e76\u4e14\u80fd\u591f\u6839\u636e\u4e8b\u4ef6\u60c5\u51b5\u51b3\u5b9aChannel\u8bfb\u5199\u3002\u8fd9\u6837\uff0c\u901a\u8fc7\u4e00\u4e2a\u7ebf\u7a0b\u7ba1\u7406\u591a\u4e2aChannel\uff0c\u5c31\u53ef\u4ee5\u5904\u7406\u5927\u91cf\u7f51\u7edc\u8fde\u63a5\u4e86\u3002"),(0,r.kt)("p",null,"\u6709\u4e86Selector\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5229\u7528\u4e00\u4e2a\u7ebf\u7a0b\u6765\u5904\u7406\u6240\u6709\u7684channels\u3002\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5207\u6362\u5bf9\u64cd\u4f5c\u7cfb\u7edf\u6765\u8bf4\u4ee3\u4ef7\u662f\u5f88\u9ad8\u7684\uff0c\u5e76\u4e14\u6bcf\u4e2a\u7ebf\u7a0b\u4e5f\u4f1a\u5360\u7528\u4e00\u5b9a\u7684\u7cfb\u7edf\u8d44\u6e90\u3002\u6240\u4ee5\uff0c\u5bf9\u7cfb\u7edf\u6765\u8bf4\u4f7f\u7528\u7684\u7ebf\u7a0b\u8d8a\u5c11\u8d8a\u597d\u3002"),(0,r.kt)("h4",{id:"1\u5982\u4f55\u521b\u5efa\u4e00\u4e2aselector"},"1.\u5982\u4f55\u521b\u5efa\u4e00\u4e2aSelector"),(0,r.kt)("p",null,"Selector \u5c31\u662f\u60a8\u6ce8\u518c\u5bf9\u5404\u79cd I/O \u4e8b\u4ef6\u5174\u8da3\u7684\u5730\u65b9\uff0c\u800c\u4e14\u5f53\u90a3\u4e9b\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5c31\u662f\u8fd9\u4e2a\u5bf9\u8c61\u544a\u8bc9\u60a8\u6240\u53d1\u751f\u7684\u4e8b\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Selector selector = Selector.open();\n")),(0,r.kt)("h4",{id:"2\u6ce8\u518cchannel\u5230selector"},"2.\u6ce8\u518cChannel\u5230Selector"),(0,r.kt)("p",null,"\u4e3a\u4e86\u80fd\u8ba9Channel\u548cSelector\u914d\u5408\u4f7f\u7528\uff0c\u6211\u4eec\u9700\u8981\u628aChannel\u6ce8\u518c\u5230Selector\u4e0a\u3002\u901a\u8fc7\u8c03\u7528 channel.register\uff08\uff09\u65b9\u6cd5\u6765\u5b9e\u73b0\u6ce8\u518c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"channel.configureBlocking(false);\nSelectionKey key =channel.register(selector,SelectionKey.OP_READ);\n")),(0,r.kt)("p",null,"\u6ce8\u610f\uff0c\u6ce8\u518c\u7684Channel \u5fc5\u987b\u8bbe\u7f6e\u6210\u5f02\u6b65\u6a21\u5f0f \u624d\u53ef\u4ee5,\u5426\u5219\u5f02\u6b65IO\u5c31\u65e0\u6cd5\u5de5\u4f5c\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u6211\u4eec\u4e0d\u80fd\u628a\u4e00\u4e2aFileChannel\u6ce8\u518c\u5230Selector\uff0c\u56e0\u4e3aFileChannel\u6ca1\u6709\u5f02\u6b65\u6a21\u5f0f\uff0c\u4f46\u662f\u7f51\u7edc\u7f16\u7a0b\u4e2d\u7684SocketChannel\u662f\u53ef\u4ee5\u7684\u3002"),(0,r.kt)("h4",{id:"3\u5173\u4e8eselectionkey"},"3.\u5173\u4e8eSelectionKey"),(0,r.kt)("p",null,"\u8bf7\u6ce8\u610f\u5bf9register()\u7684\u8c03\u7528\u7684\u8fd4\u56de\u503c\u662f\u4e00\u4e2aSelectionKey\u3002 SelectionKey \u4ee3\u8868\u8fd9\u4e2a\u901a\u9053\u5728\u6b64 Selector \u4e0a\u6ce8\u518c\u3002\u5f53\u67d0\u4e2a Selector \u901a\u77e5\u60a8\u67d0\u4e2a\u4f20\u5165\u4e8b\u4ef6\u65f6\uff0c\u5b83\u662f\u901a\u8fc7\u63d0\u4f9b\u5bf9\u5e94\u4e8e\u8be5\u4e8b\u4ef6\u7684 SelectionKey \u6765\u8fdb\u884c\u7684\u3002SelectionKey \u8fd8\u53ef\u4ee5\u7528\u4e8e\u53d6\u6d88\u901a\u9053\u7684\u6ce8\u518c\u3002"),(0,r.kt)("p",null,"SelectionKey\u4e2d\u5305\u542b\u5982\u4e0b\u5c5e\u6027\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The interest set"),(0,r.kt)("li",{parentName:"ul"},"The ready set"),(0,r.kt)("li",{parentName:"ul"},"The Channel"),(0,r.kt)("li",{parentName:"ul"},"The Selector"),(0,r.kt)("li",{parentName:"ul"},"An attached object (optional)")),(0,r.kt)("h5",{id:"1-interest-set"},"(1) Interest set"),(0,r.kt)("p",null,"\u5c31\u50cf\u6211\u4eec\u5728\u524d\u9762\u8bb2\u5230\u7684\u628aChannel\u6ce8\u518c\u5230Selector\u6765\u76d1\u542c\u611f\u5174\u8da3\u7684\u4e8b\u4ef6\uff0cinterest set\u5c31\u662f\u4f60\u8981\u9009\u62e9\u7684\u611f\u5174\u8da3\u7684\u4e8b\u4ef6\u7684\u96c6\u5408\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7SelectionKey\u5bf9\u8c61\u6765\u8bfb\u5199interest set:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"int interestSet = selectionKey.interestOps();\nboolean isInterestedInAccept  = interestSet & SelectionKey.OP_ACCEPT;\nboolean isInterestedInConnect = interestSet & SelectionKey.OP_CONNECT;\nboolean isInterestedInRead    = interestSet & SelectionKey.OP_READ;\nboolean isInterestedInWrite   = interestSet & SelectionKey.OP_WRITE; \n")),(0,r.kt)("p",null,"\u901a\u8fc7\u4e0a\u9762\u4f8b\u5b50\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7528AND \u548cSelectionKey \u4e2d\u7684\u5e38\u91cf\u505a\u8fd0\u7b97\uff0c\u4eceSelectionKey\u4e2d\u627e\u5230\u6211\u4eec\u611f\u5174\u8da3\u7684\u4e8b\u4ef6\u3002"),(0,r.kt)("h5",{id:"2-ready-set"},"(2) Ready Set"),(0,r.kt)("p",null,"ready set \u662f\u901a\u9053\u5df2\u7ecf\u51c6\u5907\u5c31\u7eea\u7684\u64cd\u4f5c\u7684\u96c6\u5408\u3002\u5728\u4e00\u6b21\u9009Selection\u4e4b\u540e\uff0c\u4f60\u5e94\u8be5\u4f1a\u9996\u5148\u8bbf\u95ee\u8fd9\u4e2aready set\u3002Selection\u5c06\u5728\u4e0b\u4e00\u5c0f\u8282\u8fdb\u884c\u89e3\u91ca\u3002\u53ef\u4ee5\u8fd9\u6837\u8bbf\u95eeready\u96c6\u5408\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"int readySet = selectionKey.readyOps();\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u7528\u50cf\u68c0\u6d4binterest\u96c6\u5408\u90a3\u6837\u7684\u65b9\u6cd5\uff0c\u6765\u68c0\u6d4bChannel\u4e2d\u4ec0\u4e48\u4e8b\u4ef6\u6216\u64cd\u4f5c\u5df2\u7ecf\u5c31\u7eea\u3002\u4f46\u662f\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u56db\u4e2a\u65b9\u6cd5\uff0c\u5b83\u4eec\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u7c7b\u578b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"selectionKey.isAcceptable();\nselectionKey.isConnectable();\nselectionKey.isReadable();\nselectionKey.isWritable();\n")),(0,r.kt)("h5",{id:"3-channel-\u548c-selector"},"(3) Channel \u548c Selector"),(0,r.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7SelectionKey\u83b7\u5f97Selector\u548c\u6ce8\u518c\u7684Channel\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Channel  channel  = selectionKey.channel();\nSelector selector = selectionKey.selector(); \n")),(0,r.kt)("h5",{id:"4-attach\u4e00\u4e2a\u5bf9\u8c61"},"(4) Attach\u4e00\u4e2a\u5bf9\u8c61"),(0,r.kt)("p",null,"\u53ef\u4ee5\u5c06\u4e00\u4e2a\u5bf9\u8c61\u6216\u8005\u66f4\u591a\u4fe1\u606fattach \u5230SelectionKey\u4e0a\uff0c\u8fd9\u6837\u5c31\u80fd\u65b9\u4fbf\u7684\u8bc6\u522b\u67d0\u4e2a\u7ed9\u5b9a\u7684\u901a\u9053\u3002\u4f8b\u5982\uff0c\u53ef\u4ee5\u9644\u52a0 \u4e0e\u901a\u9053\u4e00\u8d77\u4f7f\u7528\u7684Buffer\uff0c\u6216\u662f\u5305\u542b\u805a\u96c6\u6570\u636e\u7684\u67d0\u4e2a\u5bf9\u8c61\u3002\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"selectionKey.attach(theObject);\nObject attachedObj = selectionKey.attachment();\n")),(0,r.kt)("p",null,"\u8fd8\u53ef\u4ee5\u5728\u7528register()\u65b9\u6cd5\u5411Selector\u6ce8\u518cChannel\u7684\u65f6\u5019\u9644\u52a0\u5bf9\u8c61\u3002\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"SelectionKey key = channel.register(selector, SelectionKey.OP_READ, theObject);\n")),(0,r.kt)("h4",{id:"4\u5173\u4e8eselectedkeys"},"4.\u5173\u4e8eSelectedKeys()"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u751f\u4ea7\u7cfb\u7edf\u4e2d\u4e00\u822c\u4f1a\u989d\u5916\u8fdb\u884c\u5c31\u7eea\u72b6\u6001\u68c0\u67e5")),(0,r.kt)("p",null,"\u4e00\u65e6\u8c03\u7528\u4e86select()\u65b9\u6cd5\uff0c\u5b83\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6570\u503c\uff0c\u8868\u793a\u4e00\u4e2a\u6216\u591a\u4e2a\u901a\u9053\u5df2\u7ecf\u5c31\u7eea\uff0c\u7136\u540e\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528selector.selectedKeys()\u65b9\u6cd5\u8fd4\u56de\u7684SelectionKey\u96c6\u5408\u6765\u83b7\u5f97\u5c31\u7eea\u7684Channel\u3002\u8bf7\u770b\u6f14\u793a\u65b9\u6cd5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Set<SelectionKey> selectedKeys = selector.selectedKeys();\n")),(0,r.kt)("p",null,"\u5f53\u4f60\u901a\u8fc7Selector\u6ce8\u518c\u4e00\u4e2aChannel\u65f6\uff0cchannel.register()\u65b9\u6cd5\u4f1a\u8fd4\u56de\u4e00\u4e2aSelectionKey\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u5c31\u4ee3\u8868\u4e86\u4f60\u6ce8\u518c\u7684Channel\u3002\u8fd9\u4e9b\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7selectedKeys()\u65b9\u6cd5\u83b7\u5f97\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fed\u4ee3\u8fd9\u4e9bselected key\u6765\u83b7\u5f97\u5c31\u7eea\u7684Channel\uff0c\u4e0b\u9762\u662f\u6f14\u793a\u4ee3\u7801\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Set<SelectionKey> selectedKeys = selector.selectedKeys();\nIterator<SelectionKey> keyIterator = selectedKeys.iterator();\nwhile(keyIterator.hasNext()) { \n    SelectionKey key = keyIterator.next();\n    if(key.isAcceptable()) {\n        // a connection was accepted by a ServerSocketChannel.\n    } else if (key.isConnectable()) {\n        // a connection was established with a remote server.\n    } else if (key.isReadable()) {\n        // a channel is ready for reading\n    } else if (key.isWritable()) {\n        // a channel is ready for writing\n    }\n    keyIterator.remove();\n}\n")),(0,r.kt)("p",null,"\u8fd9\u4e2a\u5faa\u73af\u904d\u5386selected key\u7684\u96c6\u5408\u4e2d\u7684\u6bcf\u4e2akey\uff0c\u5e76\u5bf9\u6bcf\u4e2akey\u505a\u6d4b\u8bd5\u6765\u5224\u65ad\u54ea\u4e2aChannel\u5df2\u7ecf\u5c31\u7eea\u3002"),(0,r.kt)("p",null,"\u8bf7\u6ce8\u610f\u5faa\u73af\u4e2d\u6700\u540e\u7684keyIterator.remove()\u65b9\u6cd5\u3002Selector\u5bf9\u8c61\u5e76\u4e0d\u4f1a\u4ece\u81ea\u5df1\u7684selected key\u96c6\u5408\u4e2d\u81ea\u52a8\u79fb\u9664SelectionKey\u5b9e\u4f8b\u3002\u6211\u4eec\u9700\u8981\u5728\u5904\u7406\u5b8c\u4e00\u4e2aChannel\u7684\u65f6\u5019\u81ea\u5df1\u53bb\u79fb\u9664\u3002\u5f53\u4e0b\u4e00\u6b21Channel\u5c31\u7eea\u7684\u65f6\u5019\uff0cSelector\u4f1a\u518d\u6b21\u628a\u5b83\u6dfb\u52a0\u5230selected key\u96c6\u5408\u4e2d\u3002"),(0,r.kt)("p",null,"SelectionKey.channel()\u65b9\u6cd5\u8fd4\u56de\u7684Channel\u9700\u8981\u8f6c\u6362\u6210\u4f60\u5177\u4f53\u8981\u5904\u7406\u7684\u7c7b\u578b\uff0c\u6bd4\u5982\u662fServerSocketChannel\u6216\u8005SocketChannel\u7b49\u7b49\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"IO \u90fd\u662f\u540c\u6b65\u963b\u585e\u6a21\u5f0f\uff0c\u6240\u4ee5\u9700\u8981\u591a\u7ebf\u7a0b\u4ee5\u5b9e\u73b0\u591a\u4efb\u52a1\u5904\u7406\u3002\u800c NIO \u5219\u662f\u5229\u7528\u4e86\u5355\u7ebf\u7a0b\u8f6e\u8be2\u4e8b\u4ef6\u7684\u673a\u5236\uff0c\u901a\u8fc7\u9ad8\u6548\u5730\u5b9a\u4f4d\u5c31\u7eea\u7684 Channel\uff0c\u6765\u51b3\u5b9a\u505a\u4ec0\u4e48\uff0c\u4ec5\u4ec5 select \u9636\u6bb5\u662f\u963b\u585e\u7684\uff0c\u53ef\u4ee5\u6709\u6548\u907f\u514d\u5927\u91cf\u5ba2\u6237\u7aef\u8fde\u63a5\u65f6\uff0c\u9891\u7e41\u7ebf\u7a0b\u5207\u6362\u5e26\u6765\u7684\u95ee\u9898\uff0c\u5e94\u7528\u7684\u6269\u5c55\u80fd\u529b\u6709\u4e86\u975e\u5e38\u5927\u7684\u63d0\u9ad8")),(0,r.kt)("h2",{id:"53-nio2aio\u5f02\u6b65\u975e\u963b\u585e"},"5.3 NIO2\uff08==AIO\uff09(\u5f02\u6b65\u3001\u975e\u963b\u585e)"),(0,r.kt)("p",null,"AIO\u662f\u5f02\u6b65IO\u7684\u7f29\u5199\uff0c\u867d\u7136NIO\u5728\u7f51\u7edc\u64cd\u4f5c\u4e2d\uff0c\u63d0\u4f9b\u4e86\u975e\u963b\u585e\u7684\u65b9\u6cd5\uff0c\u4f46\u662fNIO\u7684IO\u884c\u4e3a\u8fd8\u662f\u540c\u6b65\u7684\u3002\u5bf9\u4e8eNIO\u6765\u8bf4\uff0c\u6211\u4eec\u7684\u4e1a\u52a1\u7ebf\u7a0b\u662f\u5728IO\u64cd\u4f5c\u51c6\u5907\u597d\u65f6\uff0c\u5f97\u5230\u901a\u77e5\uff0c\u63a5\u7740\u5c31\u7531\u8fd9\u4e2a\u7ebf\u7a0b\u81ea\u884c\u8fdb\u884cIO\u64cd\u4f5c\uff0cIO\u64cd\u4f5c\u672c\u8eab\u662f\u540c\u6b65\u7684\u3002"),(0,r.kt)("p",null,"\u4f46\u662f\u5bf9AIO\u6765\u8bf4\uff0c\u5219\u66f4\u52a0\u8fdb\u4e86\u4e00\u6b65\uff0c\u5b83\u4e0d\u662f\u5728IO\u51c6\u5907\u597d\u65f6\u518d\u901a\u77e5\u7ebf\u7a0b\uff0c\u800c\u662f\u5728IO\u64cd\u4f5c\u5df2\u7ecf\u5b8c\u6210\u540e\uff0c\u518d\u7ed9\u7ebf\u7a0b\u53d1\u51fa\u901a\u77e5\u3002\u56e0\u6b64AIO\u662f\u4e0d\u4f1a\u963b\u585e\u7684\uff0c\u6b64\u65f6\u6211\u4eec\u7684\u4e1a\u52a1\u903b\u8f91\u5c06\u53d8\u6210\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u7b49\u5f85IO\u64cd\u4f5c\u5b8c\u6210\u540e\uff0c\u7531\u7cfb\u7edf\u81ea\u52a8\u89e6\u53d1\u3002"),(0,r.kt)("p",null,"\u4e0eNIO\u4e0d\u540c\uff0c\u5f53\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u65f6\uff0c\u53ea\u987b\u76f4\u63a5\u8c03\u7528API\u7684read\u6216write\u65b9\u6cd5\u5373\u53ef\u3002\u8fd9\u4e24\u79cd\u65b9\u6cd5\u5747\u4e3a\u5f02\u6b65\u7684\uff0c\u5bf9\u4e8e\u8bfb\u64cd\u4f5c\u800c\u8a00\uff0c\u5f53\u6709\u6d41\u53ef\u8bfb\u53d6\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5c06\u53ef\u8bfb\u7684\u6d41\u4f20\u5165read\u65b9\u6cd5\u7684\u7f13\u51b2\u533a\uff0c\u5e76\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\uff1b\u5bf9\u4e8e\u5199\u64cd\u4f5c\u800c\u8a00\uff0c\u5f53\u64cd\u4f5c\u7cfb\u7edf\u5c06write\u65b9\u6cd5\u4f20\u9012\u7684\u6d41\u5199\u5165\u5b8c\u6bd5\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4e3b\u52a8\u901a\u77e5\u5e94\u7528\u7a0b\u5e8f\u3002 \u5373\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0cread/write\u65b9\u6cd5\u90fd\u662f\u5f02\u6b65\u7684\uff0c\u5b8c\u6210\u540e\u4f1a\u4e3b\u52a8\u8c03\u7528\u56de\u8c03\u51fd\u6570\u3002 \u5728JDK1.7\u4e2d\uff0c\u8fd9\u90e8\u5206\u5185\u5bb9\u88ab\u79f0\u4f5cNIO.2\uff0c\u4e3b\u8981\u5728Java.nio.channels\u5305\u4e0b\u589e\u52a0\u4e86\u4e0b\u9762\u56db\u4e2a\u5f02\u6b65\u901a\u9053\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"AsynchronousSocketChannel"),(0,r.kt)("li",{parentName:"ul"},"AsynchronousServerSocketChannel"),(0,r.kt)("li",{parentName:"ul"},"AsynchronousFileChannel"),(0,r.kt)("li",{parentName:"ul"},"AsynchronousDatagramChannel")),(0,r.kt)("p",null,"\u5728AIO socket\u7f16\u7a0b\u4e2d\uff0c\u670d\u52a1\u7aef\u901a\u9053\u662fAsynchronousServerSocketChannel\uff0c\u8fd9\u4e2a\u7c7b\u63d0\u4f9b\u4e86\u4e00\u4e2aopen()\u9759\u6001\u5de5\u5382\uff0c\u4e00\u4e2abind()\u65b9\u6cd5\u7528\u4e8e\u7ed1\u5b9a\u670d\u52a1\u7aefIP\u5730\u5740\uff08\u8fd8\u6709\u7aef\u53e3\u53f7\uff09\uff0c\u53e6\u5916\u8fd8\u63d0\u4f9b\u4e86accept()\u7528\u4e8e\u63a5\u6536\u7528\u6237\u8fde\u63a5\u8bf7\u6c42\u3002\u5728\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u901a\u9053\u662fAsynchronousSocketChannel,\u8fd9\u4e2a\u901a\u9053\u5904\u7406\u63d0\u4f9bopen\u9759\u6001\u5de5\u5382\u65b9\u6cd5\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e86read\u548cwrite\u65b9\u6cd5\u3002"),(0,r.kt)("p",null,"\u5728AIO\u7f16\u7a0b\u4e2d\uff0c\u53d1\u51fa\u4e00\u4e2a\u4e8b\u4ef6\uff08accept read write\u7b49\uff09\u4e4b\u540e\u8981\u6307\u5b9a\u4e8b\u4ef6\u5904\u7406\u7c7b\uff08\u56de\u8c03\u51fd\u6570\uff09\uff0cAIO\u4e2d\u7684\u4e8b\u4ef6\u5904\u7406\u7c7b\u662fCompletionHandler<V,A>\uff0c\u8fd9\u4e2a\u63a5\u53e3\u5b9a\u4e49\u4e86\u5982\u4e0b\u4e24\u4e2a\u65b9\u6cd5\uff0c\u5206\u522b\u5728\u5f02\u6b65\u64cd\u4f5c\u6210\u529f\u548c\u5931\u8d25\u65f6\u88ab\u56de\u8c03\u3002"),(0,r.kt)("p",null,"void completed(V result, A attachment);"),(0,r.kt)("p",null,"void failed(Throwable exc, A attachment);"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Netty\u6846\u67b6"),"\uff1a\u57fa\u4e8eNIO 2.0\u5c01\u88c5\u597d\u7684\u901a\u4fe1\u6846\u67b6\uff0c\u6027\u80fd\u4f18\u5f02\uff0c\u7a33\u5b9a\u597d\uff0c\u4ee3\u7801\u7b80\u5355\uff0c\u5927\u578b\u6280\u672f\u5927\u91cf\u516c\u53f8\u7ecf\u8fc7\u5b9e\u6218\u4f7f\u7528\u4ee5\u540e\uff0c\u53d1\u73b0\u5404\u65b9\u9762\u90fd\u5f88\u597d\uff01\uff01"))}k.isMDXComponent=!0},24443:function(e,t,n){t.Z=n.p+"assets/images/01_CS\u67b6\u6784-c5a7d514cedb1f5f0083ad0925993da5.png"},70732:function(e,t,n){t.Z=n.p+"assets/images/02_BS\u67b6\u6784-e73582637dc38b8fdca5501e5e9ea8e9.png"},45011:function(e,t,n){t.Z=n.p+"assets/images/03_\u901a\u8baf\u534f\u8bae-76cf4f01560cede57731b4e2a761c01a.png"},67605:function(e,t,n){t.Z=n.p+"assets/images/04_TCP\u534f\u8bae\u4e09\u6b21\u63e1\u624b-7b519fdcdf9f2d1121f05f55c5b805a2.png"},70663:function(e,t,n){t.Z=n.p+"assets/images/05_UDP\u901a\u4fe1\u8fc7\u7a0b-531409db79571bc9de8ed1a7d69fb429.png"},29737:function(e,t,n){t.Z=n.p+"assets/images/06_TCP\u901a\u4fe1\u8fc7\u7a0b-2bf5b71ebec37128fc76097f336c62e9.png"},90107:function(e,t,n){t.Z=n.p+"assets/images/07_\u6587\u4ef6\u4e0a\u4f20\u56fe\u89e3-4839e128626ba703f37bc2aa710299bb.png"},75858:function(e,t,n){t.Z=n.p+"assets/images/08_BS\u670d\u52a1\u5668\u6848\u4f8b\u6548\u679c\u56fe-bdc7802cada83c910cf703243e976ec6.png"},62263:function(e,t,n){t.Z=n.p+"assets/images/09_BS\u901a\u8baf\u56fe\u89e3-f3e97ac430efcb7d36491fc3c53874e5.png"}}]);